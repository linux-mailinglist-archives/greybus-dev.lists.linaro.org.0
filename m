Return-Path: <greybus-dev-bounces@lists.linaro.org>
X-Original-To: lists+greybus-dev@lfdr.de
Delivered-To: lists+greybus-dev@lfdr.de
Received: from lists.linaro.org (lists.linaro.org [107.22.173.205])
	by mail.lfdr.de (Postfix) with ESMTPS id BF7901F5A7C
	for <lists+greybus-dev@lfdr.de>; Wed, 10 Jun 2020 19:30:37 +0200 (CEST)
Received: from lists.linaro.org (localhost [127.0.0.1])
	by lists.linaro.org (Postfix) with ESMTP id E49F865F72
	for <lists+greybus-dev@lfdr.de>; Wed, 10 Jun 2020 17:30:36 +0000 (UTC)
Received: by lists.linaro.org (Postfix, from userid 109)
	id D8E2265F7D; Wed, 10 Jun 2020 17:30:36 +0000 (UTC)
X-Spam-Checker-Version: SpamAssassin 3.4.2 (2018-09-13) on lists.linaro.org
X-Spam-Level: 
X-Spam-Status: No, score=-2.9 required=5.0 tests=BAYES_00,DKIM_ADSP_CUSTOM_MED,
	FREEMAIL_FROM,MAILING_LIST_MULTI,RCVD_IN_DNSWL_NONE,RCVD_IN_MSPIKE_H3,
	RCVD_IN_MSPIKE_WL,SPF_HELO_NONE autolearn=disabled version=3.4.2
Received: from lists.linaro.org (localhost [127.0.0.1])
	by lists.linaro.org (Postfix) with ESMTP id AE6B0664DE;
	Wed, 10 Jun 2020 17:29:49 +0000 (UTC)
X-Original-To: greybus-dev@lists.linaro.org
Delivered-To: greybus-dev@lists.linaro.org
Received: from lists.linaro.org (localhost [127.0.0.1])
 by lists.linaro.org (Postfix) with ESMTP id A245361915
 for <greybus-dev@lists.linaro.org>; Wed, 10 Jun 2020 17:29:45 +0000 (UTC)
Received: by lists.linaro.org (Postfix, from userid 109)
 id 94AED6197A; Wed, 10 Jun 2020 17:29:45 +0000 (UTC)
Received: from mail-pj1-f68.google.com (mail-pj1-f68.google.com
 [209.85.216.68])
 by lists.linaro.org (Postfix) with ESMTPS id 2DC5265FBC
 for <greybus-dev@lists.linaro.org>; Wed, 10 Jun 2020 17:29:38 +0000 (UTC)
Received: by mail-pj1-f68.google.com with SMTP id m2so1166545pjv.2
 for <greybus-dev@lists.linaro.org>; Wed, 10 Jun 2020 10:29:38 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=35RgTo0o0tsx9sP3dukkiiZ8jdbPV8gcb23FC2c/194=;
 b=XoMrJ9YdQAYp5eQEr5dxsEBQYqjQMjSpNi1XjBlfTtOaJ6DRLzj5pcOF0538WljGvj
 h6SYSplbyF/esSfL68GXgQ2f0VbvTl3q1uasb87jMWk7GqoIXik1mUWO2wMP+6y9003T
 B4nxnPnutPI3sB7qijKJglEjjQ3ppto3sqbic7tHzPZeHNDHC3w7jSQNlboT8EFXoHOQ
 AvZ3+3Vr3K0B1wrclbGY8JxaETpe+VvxKY4aFHsn42taGPwEg8A0X9v4U/Q1o2gosDNx
 uP6rBloxfMLoxPnXsJ3MjYJodX5TtvFImCuGGgLeLK5JS5KL6ZYF6GRoUNzCr4pPtXKK
 h8bw==
X-Gm-Message-State: AOAM531ZRKRyaVSwIq6Mklje/s43Z+sY6H7NsoWtt4fpXgCr1M2DjU2p
 b07cvnbDFmKOijrcxFoMdEU=
X-Google-Smtp-Source: ABdhPJwcrK5qGfE1/Zj0mY5LoXzLwcjsAp81qg3C2KsvpmxyGM6SdTn4wMyiq1xiAQGeCvXV/Mv9BQ==
X-Received: by 2002:a17:90a:6e2:: with SMTP id
 k89mr4228236pjk.74.1591810177272; 
 Wed, 10 Jun 2020 10:29:37 -0700 (PDT)
Received: from cvds-vagarw7.iind.intel.com ([192.55.54.40])
 by smtp.googlemail.com with ESMTPSA id l83sm490470pfd.150.2020.06.10.10.29.27
 (version=TLS1_2 cipher=ECDHE-ECDSA-AES128-GCM-SHA256 bits=128/128);
 Wed, 10 Jun 2020 10:29:36 -0700 (PDT)
From: Vaibhav Agarwal <vaibhav.sr@gmail.com>
To: Greg Kroah-Hartman <gregkh@linuxfoundation.org>,
 Alex Elder <elder@kernel.org>, Johan Hovold <johan@kernel.org>,
 Mark Greer <mgreer@animalcreek.com>, Takashi Iwai <tiwai@suse.com>,
 Jaroslav Kysela <perex@perex.cz>, Mark Brown <broonie@kernel.org>,
 Liam Girdwood <lgirdwood@gmail.com>
Date: Wed, 10 Jun 2020 22:58:27 +0530
Message-Id: <2393e59152a1f544ffe652c6625ab4f15a33963b.1591802243.git.vaibhav.sr@gmail.com>
X-Mailer: git-send-email 2.26.2
In-Reply-To: <cover.1591802243.git.vaibhav.sr@gmail.com>
References: <cover.1591802243.git.vaibhav.sr@gmail.com>
MIME-Version: 1.0
X-Virus-Scanned: ClamAV using ClamSMTP
Cc: devel@driverdev.osuosl.org, alsa-devel@alsa-project.org,
 Alexandre Belloni <alexandre.belloni@bootlin.com>,
 linux-kernel@vger.kernel.org, greybus-dev@lists.linaro.org
Subject: [greybus-dev] [PATCH v2 3/6] staging: greybus: audio: Resolve
	compilation errors for GB codec module
X-BeenThere: greybus-dev@lists.linaro.org
X-Mailman-Version: 2.1.16
Precedence: list
List-Id: Greybus Development Mail List <greybus-dev.lists.linaro.org>
List-Unsubscribe: <https://lists.linaro.org/mailman/options/greybus-dev>,
 <mailto:greybus-dev-request@lists.linaro.org?subject=unsubscribe>
List-Archive: <http://lists.linaro.org/pipermail/greybus-dev/>
List-Post: <mailto:greybus-dev@lists.linaro.org>
List-Help: <mailto:greybus-dev-request@lists.linaro.org?subject=help>
List-Subscribe: <https://lists.linaro.org/mailman/listinfo/greybus-dev>,
 <mailto:greybus-dev-request@lists.linaro.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: greybus-dev-bounces@lists.linaro.org
Sender: "greybus-dev" <greybus-dev-bounces@lists.linaro.org>
X-Virus-Scanned: ClamAV using ClamSMTP

RHVlIHRvIGRlcGVuZGVuY2llcyBvbiBBU29DIGZyYW1ld29yayBjaGFuZ2VzLCBHQiBkdW1teSBj
b2RlYyBtb2R1bGUKY29tcGlsYXRpb24gaXMgY3VycmVudGx5IGRpc2FibGVkLiBUaGlzIHBhdGNo
IHVwZGF0ZXMgY29kZWMgZHJpdmVyIGFzCnBlciB0aGUgbGF0ZXN0IEFTb0MgQVBJcy4KClNpZ25l
ZC1vZmYtYnk6IFZhaWJoYXYgQWdhcndhbCA8dmFpYmhhdi5zckBnbWFpbC5jb20+Ci0tLQogZHJp
dmVycy9zdGFnaW5nL2dyZXlidXMvYXVkaW9fY29kZWMuYyB8IDg4ICsrKysrKysrKysrKystLS0t
LS0tLS0tLS0tLQogZHJpdmVycy9zdGFnaW5nL2dyZXlidXMvYXVkaW9fY29kZWMuaCB8ICAyICst
CiAyIGZpbGVzIGNoYW5nZWQsIDQ0IGluc2VydGlvbnMoKyksIDQ2IGRlbGV0aW9ucygtKQoKZGlm
ZiAtLWdpdCBhL2RyaXZlcnMvc3RhZ2luZy9ncmV5YnVzL2F1ZGlvX2NvZGVjLmMgYi9kcml2ZXJz
L3N0YWdpbmcvZ3JleWJ1cy9hdWRpb19jb2RlYy5jCmluZGV4IDZkYzRlZTJiZmIzNy4uMGVjZGJh
MjcwODZiIDEwMDY0NAotLS0gYS9kcml2ZXJzL3N0YWdpbmcvZ3JleWJ1cy9hdWRpb19jb2RlYy5j
CisrKyBiL2RyaXZlcnMvc3RhZ2luZy9ncmV5YnVzL2F1ZGlvX2NvZGVjLmMKQEAgLTgyNSw3ICs4
MjUsNyBAQCBzdGF0aWMgaW50IGdiYXVkaW9faW5pdF9qYWNrKHN0cnVjdCBnYmF1ZGlvX21vZHVs
ZV9pbmZvICptb2R1bGUsCiBpbnQgZ2JhdWRpb19yZWdpc3Rlcl9tb2R1bGUoc3RydWN0IGdiYXVk
aW9fbW9kdWxlX2luZm8gKm1vZHVsZSkKIHsKIAlpbnQgcmV0OwotCXN0cnVjdCBzbmRfc29jX2Nv
ZGVjICpjb2RlYzsKKwlzdHJ1Y3Qgc25kX3NvY19jb21wb25lbnQgKmNvbXA7CiAJc3RydWN0IHNu
ZF9jYXJkICpjYXJkOwogCXN0cnVjdCBnYmF1ZGlvX2phY2sgKmphY2sgPSBOVUxMOwogCkBAIC04
MzQsOCArODM0LDggQEAgaW50IGdiYXVkaW9fcmVnaXN0ZXJfbW9kdWxlKHN0cnVjdCBnYmF1ZGlv
X21vZHVsZV9pbmZvICptb2R1bGUpCiAJCXJldHVybiAtRUFHQUlOOwogCX0KIAotCWNvZGVjID0g
Z2Jjb2RlYy0+Y29kZWM7Ci0JY2FyZCA9IGNvZGVjLT5jYXJkLT5zbmRfY2FyZDsKKwljb21wID0g
Z2Jjb2RlYy0+Y29tcG9uZW50OworCWNhcmQgPSBjb21wLT5jYXJkLT5zbmRfY2FyZDsKIAogCWRv
d25fd3JpdGUoJmNhcmQtPmNvbnRyb2xzX3J3c2VtKTsKIApAQCAtODQ3LDMzICs4NDcsMzMgQEAg
aW50IGdiYXVkaW9fcmVnaXN0ZXJfbW9kdWxlKHN0cnVjdCBnYmF1ZGlvX21vZHVsZV9pbmZvICpt
b2R1bGUpCiAJCXJldHVybiAtRUlOVkFMOwogCX0KIAotCXJldCA9IGdiYXVkaW9faW5pdF9qYWNr
KG1vZHVsZSwgY29tcG9uZW50LT5jYXJkKTsKKwlyZXQgPSBnYmF1ZGlvX2luaXRfamFjayhtb2R1
bGUsIGNvbXAtPmNhcmQpOwogCWlmIChyZXQpIHsKIAkJdXBfd3JpdGUoJmNhcmQtPmNvbnRyb2xz
X3J3c2VtKTsKIAkJcmV0dXJuIHJldDsKIAl9CiAKIAlpZiAobW9kdWxlLT5kYXBtX3dpZGdldHMp
Ci0JCXNuZF9zb2NfZGFwbV9uZXdfY29udHJvbHMoJmNvZGVjLT5kYXBtLCBtb2R1bGUtPmRhcG1f
d2lkZ2V0cywKKwkJc25kX3NvY19kYXBtX25ld19jb250cm9scygmY29tcC0+ZGFwbSwgbW9kdWxl
LT5kYXBtX3dpZGdldHMsCiAJCQkJCSAgbW9kdWxlLT5udW1fZGFwbV93aWRnZXRzKTsKIAlpZiAo
bW9kdWxlLT5jb250cm9scykKLQkJc25kX3NvY19hZGRfY29kZWNfY29udHJvbHMoY29kZWMsIG1v
ZHVsZS0+Y29udHJvbHMsCi0JCQkJCSAgIG1vZHVsZS0+bnVtX2NvbnRyb2xzKTsKKwkJc25kX3Nv
Y19hZGRfY29tcG9uZW50X2NvbnRyb2xzKGNvbXAsIG1vZHVsZS0+Y29udHJvbHMsCisJCQkJCSAg
ICAgICBtb2R1bGUtPm51bV9jb250cm9scyk7CiAJaWYgKG1vZHVsZS0+ZGFwbV9yb3V0ZXMpCi0J
CXNuZF9zb2NfZGFwbV9hZGRfcm91dGVzKCZjb2RlYy0+ZGFwbSwgbW9kdWxlLT5kYXBtX3JvdXRl
cywKKwkJc25kX3NvY19kYXBtX2FkZF9yb3V0ZXMoJmNvbXAtPmRhcG0sIG1vZHVsZS0+ZGFwbV9y
b3V0ZXMsCiAJCQkJCW1vZHVsZS0+bnVtX2RhcG1fcm91dGVzKTsKIAogCS8qIGNhcmQgYWxyZWFk
eSBpbnN0YW50aWF0ZWQsIGNyZWF0ZSB3aWRnZXRzIGhlcmUgb25seSAqLwotCWlmIChjb2RlYy0+
Y2FyZC0+aW5zdGFudGlhdGVkKSB7Ci0JCXNuZF9zb2NfZGFwbV9saW5rX2NvbXBvbmVudF9kYWlf
d2lkZ2V0cyhjb2RlYy0+Y2FyZCwKLQkJCQkJCQkmY29kZWMtPmRhcG0pOworCWlmIChjb21wLT5j
YXJkLT5pbnN0YW50aWF0ZWQpIHsKKwkJc25kX3NvY19kYXBtX2xpbmtfY29tcG9uZW50X2RhaV93
aWRnZXRzKGNvbXAtPmNhcmQsCisJCQkJCQkJJmNvbXAtPmRhcG0pOwogI2lmZGVmIENPTkZJR19T
TkRfSkFDSwogCQkvKgogCQkgKiByZWdpc3RlciBqYWNrIGRldmljZXMgZm9yIHRoaXMgbW9kdWxl
CiAJCSAqIGZyb20gY29kZWMtPmphY2tfbGlzdAogCQkgKi8KIAkJbGlzdF9mb3JfZWFjaF9lbnRy
eShqYWNrLCAmbW9kdWxlLT5qYWNrX2xpc3QsIGxpc3QpIHsKLQkJCXNuZF9kZXZpY2VfcmVnaXN0
ZXIoY29kZWMtPmNhcmQtPnNuZF9jYXJkLAorCQkJc25kX2RldmljZV9yZWdpc3Rlcihjb21wLT5j
YXJkLT5zbmRfY2FyZCwKIAkJCQkJICAgIGphY2stPmphY2suamFjayk7CiAJCX0KICNlbmRpZgpA
QCAtODgzLDkgKzg4Myw5IEBAIGludCBnYmF1ZGlvX3JlZ2lzdGVyX21vZHVsZShzdHJ1Y3QgZ2Jh
dWRpb19tb2R1bGVfaW5mbyAqbW9kdWxlKQogCWxpc3RfYWRkKCZtb2R1bGUtPmxpc3QsICZnYmNv
ZGVjLT5tb2R1bGVfbGlzdCk7CiAJbXV0ZXhfdW5sb2NrKCZnYmNvZGVjLT5sb2NrKTsKIAotCWlm
IChjb2RlYy0+Y2FyZC0+aW5zdGFudGlhdGVkKQotCQlyZXQgPSBzbmRfc29jX2RhcG1fbmV3X3dp
ZGdldHMoJmNvZGVjLT5kYXBtKTsKLQlkZXZfZGJnKGNvZGVjLT5kZXYsICJSZWdpc3RlcmVkICVz
IG1vZHVsZVxuIiwgbW9kdWxlLT5uYW1lKTsKKwlpZiAoY29tcC0+Y2FyZC0+aW5zdGFudGlhdGVk
KQorCQlyZXQgPSBzbmRfc29jX2RhcG1fbmV3X3dpZGdldHMoY29tcC0+Y2FyZCk7CisJZGV2X2Ri
Zyhjb21wLT5kZXYsICJSZWdpc3RlcmVkICVzIG1vZHVsZVxuIiwgbW9kdWxlLT5uYW1lKTsKIAog
CXVwX3dyaXRlKCZjYXJkLT5jb250cm9sc19yd3NlbSk7CiAJcmV0dXJuIHJldDsKQEAgLTk1Niwx
OCArOTU2LDE4IEBAIHN0YXRpYyB2b2lkIGdiYXVkaW9fY29kZWNfY2xlYW51cChzdHJ1Y3QgZ2Jh
dWRpb19tb2R1bGVfaW5mbyAqbW9kdWxlKQogCiB2b2lkIGdiYXVkaW9fdW5yZWdpc3Rlcl9tb2R1
bGUoc3RydWN0IGdiYXVkaW9fbW9kdWxlX2luZm8gKm1vZHVsZSkKIHsKLQlzdHJ1Y3Qgc25kX3Nv
Y19jb2RlYyAqY29kZWMgPSBnYmNvZGVjLT5jb2RlYzsKLQlzdHJ1Y3Qgc25kX2NhcmQgKmNhcmQg
PSBjb2RlYy0+Y2FyZC0+c25kX2NhcmQ7CisJc3RydWN0IHNuZF9zb2NfY29tcG9uZW50ICpjb21w
ID0gZ2Jjb2RlYy0+Y29tcG9uZW50OworCXN0cnVjdCBzbmRfY2FyZCAqY2FyZCA9IGNvbXAtPmNh
cmQtPnNuZF9jYXJkOwogCXN0cnVjdCBnYmF1ZGlvX2phY2sgKmphY2ssICpuOwogCWludCBtYXNr
OwogCi0JZGV2X2RiZyhjb2RlYy0+ZGV2LCAiVW5yZWdpc3RlciAlcyBtb2R1bGVcbiIsIG1vZHVs
ZS0+bmFtZSk7CisJZGV2X2RiZyhjb21wLT5kZXYsICJVbnJlZ2lzdGVyICVzIG1vZHVsZVxuIiwg
bW9kdWxlLT5uYW1lKTsKIAogCWRvd25fd3JpdGUoJmNhcmQtPmNvbnRyb2xzX3J3c2VtKTsKIAlt
dXRleF9sb2NrKCZnYmNvZGVjLT5sb2NrKTsKIAlnYmF1ZGlvX2NvZGVjX2NsZWFudXAobW9kdWxl
KTsKIAlsaXN0X2RlbCgmbW9kdWxlLT5saXN0KTsKLQlkZXZfZGJnKGNvZGVjLT5kZXYsICJQcm9j
ZXNzIFVucmVnaXN0ZXIgJXMgbW9kdWxlXG4iLCBtb2R1bGUtPm5hbWUpOworCWRldl9kYmcoY29t
cC0+ZGV2LCAiUHJvY2VzcyBVbnJlZ2lzdGVyICVzIG1vZHVsZVxuIiwgbW9kdWxlLT5uYW1lKTsK
IAltdXRleF91bmxvY2soJmdiY29kZWMtPmxvY2spOwogCiAjaWZkZWYgQ09ORklHX1NORF9KQUNL
CkBAIC05ODMsOTkgKzk4Myw5NyBAQCB2b2lkIGdiYXVkaW9fdW5yZWdpc3Rlcl9tb2R1bGUoc3Ry
dWN0IGdiYXVkaW9fbW9kdWxlX2luZm8gKm1vZHVsZSkKIAkJCWRldl9kYmcobW9kdWxlLT5kZXYs
ICJSZXBvcnQgJXMgcmVtb3ZhbFxuIiwKIAkJCQlqYWNrLT5qYWNrLmphY2stPmlkKTsKIAkJCXNu
ZF9zb2NfamFja19yZXBvcnQoJmphY2stPmphY2ssIDAsIG1hc2spOwotCQkJc25kX2RldmljZV9m
cmVlKGNvZGVjLT5jYXJkLT5zbmRfY2FyZCwgamFjay0+amFjay5qYWNrKTsKKwkJCXNuZF9kZXZp
Y2VfZnJlZShjb21wLT5jYXJkLT5zbmRfY2FyZCwKKwkJCQkJamFjay0+amFjay5qYWNrKTsKIAkJ
CWxpc3RfZGVsKCZqYWNrLT5saXN0KTsKIAkJfQogCX0KICNlbmRpZgogCiAJaWYgKG1vZHVsZS0+
ZGFwbV9yb3V0ZXMpIHsKLQkJZGV2X2RiZyhjb2RlYy0+ZGV2LCAiUmVtb3ZpbmcgJWQgcm91dGVz
XG4iLAorCQlkZXZfZGJnKGNvbXAtPmRldiwgIlJlbW92aW5nICVkIHJvdXRlc1xuIiwKIAkJCW1v
ZHVsZS0+bnVtX2RhcG1fcm91dGVzKTsKLQkJc25kX3NvY19kYXBtX2RlbF9yb3V0ZXMoJmNvZGVj
LT5kYXBtLCBtb2R1bGUtPmRhcG1fcm91dGVzLAorCQlzbmRfc29jX2RhcG1fZGVsX3JvdXRlcygm
Y29tcC0+ZGFwbSwgbW9kdWxlLT5kYXBtX3JvdXRlcywKIAkJCQkJbW9kdWxlLT5udW1fZGFwbV9y
b3V0ZXMpOwogCX0KIAlpZiAobW9kdWxlLT5jb250cm9scykgewotCQlkZXZfZGJnKGNvZGVjLT5k
ZXYsICJSZW1vdmluZyAlZCBjb250cm9sc1xuIiwKKwkJZGV2X2RiZyhjb21wLT5kZXYsICJSZW1v
dmluZyAlZCBjb250cm9sc1xuIiwKIAkJCW1vZHVsZS0+bnVtX2NvbnRyb2xzKTsKLQkJc25kX3Nv
Y19yZW1vdmVfY29kZWNfY29udHJvbHMoY29kZWMsIG1vZHVsZS0+Y29udHJvbHMsCisJCXNuZF9z
b2NfcmVtb3ZlX2NvZGVjX2NvbnRyb2xzKGNvbXAsIG1vZHVsZS0+Y29udHJvbHMsCiAJCQkJCSAg
ICAgIG1vZHVsZS0+bnVtX2NvbnRyb2xzKTsKIAl9CiAJaWYgKG1vZHVsZS0+ZGFwbV93aWRnZXRz
KSB7Ci0JCWRldl9kYmcoY29kZWMtPmRldiwgIlJlbW92aW5nICVkIHdpZGdldHNcbiIsCisJCWRl
dl9kYmcoY29tcC0+ZGV2LCAiUmVtb3ZpbmcgJWQgd2lkZ2V0c1xuIiwKIAkJCW1vZHVsZS0+bnVt
X2RhcG1fd2lkZ2V0cyk7Ci0JCXNuZF9zb2NfZGFwbV9mcmVlX2NvbnRyb2xzKCZjb2RlYy0+ZGFw
bSwgbW9kdWxlLT5kYXBtX3dpZGdldHMsCisJCXNuZF9zb2NfZGFwbV9mcmVlX2NvbnRyb2xzKCZj
b21wLT5kYXBtLCBtb2R1bGUtPmRhcG1fd2lkZ2V0cywKIAkJCQkJICAgbW9kdWxlLT5udW1fZGFw
bV93aWRnZXRzKTsKIAl9CiAKLQlkZXZfZGJnKGNvZGVjLT5kZXYsICJVbnJlZ2lzdGVyZWQgJXMg
bW9kdWxlXG4iLCBtb2R1bGUtPm5hbWUpOworCWRldl9kYmcoY29tcC0+ZGV2LCAiVW5yZWdpc3Rl
cmVkICVzIG1vZHVsZVxuIiwgbW9kdWxlLT5uYW1lKTsKIAogCXVwX3dyaXRlKCZjYXJkLT5jb250
cm9sc19yd3NlbSk7CiB9CiBFWFBPUlRfU1lNQk9MKGdiYXVkaW9fdW5yZWdpc3Rlcl9tb2R1bGUp
OwogCiAvKgotICogY29kZWMgZHJpdmVyIG9wcworICogY29tcG9uZW50IGRyaXZlciBvcHMKICAq
Lwotc3RhdGljIGludCBnYmNvZGVjX3Byb2JlKHN0cnVjdCBzbmRfc29jX2NvZGVjICpjb2RlYykK
K3N0YXRpYyBpbnQgZ2Jjb2RlY19wcm9iZShzdHJ1Y3Qgc25kX3NvY19jb21wb25lbnQgKmNvbXAp
CiB7CiAJaW50IGk7CiAJc3RydWN0IGdiYXVkaW9fY29kZWNfaW5mbyAqaW5mbzsKIAlzdHJ1Y3Qg
Z2JhdWRpb19jb2RlY19kYWkgKmRhaTsKIAotCWluZm8gPSBkZXZtX2t6YWxsb2MoY29kZWMtPmRl
diwgc2l6ZW9mKCppbmZvKSwgR0ZQX0tFUk5FTCk7CisJaW5mbyA9IGRldm1fa3phbGxvYyhjb21w
LT5kZXYsIHNpemVvZigqaW5mbyksIEdGUF9LRVJORUwpOwogCWlmICghaW5mbykKIAkJcmV0dXJu
IC1FTk9NRU07CiAKLQlpbmZvLT5kZXYgPSBjb2RlYy0+ZGV2OworCWluZm8tPmRldiA9IGNvbXAt
PmRldjsKIAlJTklUX0xJU1RfSEVBRCgmaW5mby0+bW9kdWxlX2xpc3QpOwogCW11dGV4X2luaXQo
JmluZm8tPmxvY2spOwogCUlOSVRfTElTVF9IRUFEKCZpbmZvLT5kYWlfbGlzdCk7CiAKIAkvKiBp
bml0IGRhaV9saXN0IHVzZWQgdG8gbWFpbnRhaW4gcnVudGltZSBzdHJlYW0gaW5mbyAqLwogCWZv
ciAoaSA9IDA7IGkgPCBBUlJBWV9TSVpFKGdiYXVkaW9fZGFpKTsgaSsrKSB7Ci0JCWRhaSA9IGRl
dm1fa3phbGxvYyhjb2RlYy0+ZGV2LCBzaXplb2YoKmRhaSksIEdGUF9LRVJORUwpOworCQlkYWkg
PSBkZXZtX2t6YWxsb2MoY29tcC0+ZGV2LCBzaXplb2YoKmRhaSksIEdGUF9LRVJORUwpOwogCQlp
ZiAoIWRhaSkKIAkJCXJldHVybiAtRU5PTUVNOwogCQlkYWktPmlkID0gZ2JhdWRpb19kYWlbaV0u
aWQ7CiAJCWxpc3RfYWRkKCZkYWktPmxpc3QsICZpbmZvLT5kYWlfbGlzdCk7CiAJfQogCi0JaW5m
by0+Y29kZWMgPSBjb2RlYzsKLQlzbmRfc29jX2NvZGVjX3NldF9kcnZkYXRhKGNvZGVjLCBpbmZv
KTsKKwlpbmZvLT5jb21wb25lbnQgPSBjb21wOworCXNuZF9zb2NfY29tcG9uZW50X3NldF9kcnZk
YXRhKGNvbXAsIGluZm8pOwogCWdiY29kZWMgPSBpbmZvOwogCi0JZGV2aWNlX2luaXRfd2FrZXVw
KGNvZGVjLT5kZXYsIDEpOworCWRldmljZV9pbml0X3dha2V1cChjb21wLT5kZXYsIDEpOwogCXJl
dHVybiAwOwogfQogCi1zdGF0aWMgaW50IGdiY29kZWNfcmVtb3ZlKHN0cnVjdCBzbmRfc29jX2Nv
ZGVjICpjb2RlYykKK3N0YXRpYyB2b2lkIGdiY29kZWNfcmVtb3ZlKHN0cnVjdCBzbmRfc29jX2Nv
bXBvbmVudCAqY29tcCkKIHsKIAkvKiBFbXB0eSBmdW5jdGlvbiBmb3Igbm93ICovCi0JcmV0dXJu
IDA7CisJcmV0dXJuOwogfQogCi1zdGF0aWMgaW50IGdiY29kZWNfd3JpdGUoc3RydWN0IHNuZF9z
b2NfY29kZWMgKmNvZGVjLCB1bnNpZ25lZCBpbnQgcmVnLAorc3RhdGljIGludCBnYmNvZGVjX3dy
aXRlKHN0cnVjdCBzbmRfc29jX2NvbXBvbmVudCAqY29tcCwgdW5zaWduZWQgaW50IHJlZywKIAkJ
CSB1bnNpZ25lZCBpbnQgdmFsdWUpCiB7CiAJcmV0dXJuIDA7CiB9CiAKLXN0YXRpYyB1bnNpZ25l
ZCBpbnQgZ2Jjb2RlY19yZWFkKHN0cnVjdCBzbmRfc29jX2NvZGVjICpjb2RlYywKK3N0YXRpYyB1
bnNpZ25lZCBpbnQgZ2Jjb2RlY19yZWFkKHN0cnVjdCBzbmRfc29jX2NvbXBvbmVudCAqY29tcCwK
IAkJCQkgdW5zaWduZWQgaW50IHJlZykKIHsKIAlyZXR1cm4gMDsKIH0KIAotc3RhdGljIHN0cnVj
dCBzbmRfc29jX2NvZGVjX2RyaXZlciBzb2NfY29kZWNfZGV2X2diYXVkaW8gPSB7CitzdGF0aWMg
Y29uc3Qgc3RydWN0IHNuZF9zb2NfY29tcG9uZW50X2RyaXZlciBzb2NfY29kZWNfZGV2X2diYXVk
aW8gPSB7CiAJLnByb2JlCT0gZ2Jjb2RlY19wcm9iZSwKIAkucmVtb3ZlCT0gZ2Jjb2RlY19yZW1v
dmUsCiAKIAkucmVhZCA9IGdiY29kZWNfcmVhZCwKIAkud3JpdGUgPSBnYmNvZGVjX3dyaXRlLAot
Ci0JLmlkbGVfYmlhc19vZmYgPSB0cnVlLAotCS5pZ25vcmVfcG1kb3duX3RpbWUgPSAxLAogfTsK
IAogI2lmZGVmIENPTkZJR19QTQpAQCAtMTA5OSwxMyArMTA5NywxMyBAQCBzdGF0aWMgY29uc3Qg
c3RydWN0IGRldl9wbV9vcHMgZ2JhdWRpb19jb2RlY19wbV9vcHMgPSB7CiAKIHN0YXRpYyBpbnQg
Z2JhdWRpb19jb2RlY19wcm9iZShzdHJ1Y3QgcGxhdGZvcm1fZGV2aWNlICpwZGV2KQogewotCXJl
dHVybiBzbmRfc29jX3JlZ2lzdGVyX2NvZGVjKCZwZGV2LT5kZXYsICZzb2NfY29kZWNfZGV2X2di
YXVkaW8sCisJcmV0dXJuIGRldm1fc25kX3NvY19yZWdpc3Rlcl9jb21wb25lbnQoJnBkZXYtPmRl
diwKKwkJCSZzb2NfY29kZWNfZGV2X2diYXVkaW8sCiAJCQlnYmF1ZGlvX2RhaSwgQVJSQVlfU0la
RShnYmF1ZGlvX2RhaSkpOwogfQogCiBzdGF0aWMgaW50IGdiYXVkaW9fY29kZWNfcmVtb3ZlKHN0
cnVjdCBwbGF0Zm9ybV9kZXZpY2UgKnBkZXYpCiB7Ci0Jc25kX3NvY191bnJlZ2lzdGVyX2NvZGVj
KCZwZGV2LT5kZXYpOwogCXJldHVybiAwOwogfQogCmRpZmYgLS1naXQgYS9kcml2ZXJzL3N0YWdp
bmcvZ3JleWJ1cy9hdWRpb19jb2RlYy5oIGIvZHJpdmVycy9zdGFnaW5nL2dyZXlidXMvYXVkaW9f
Y29kZWMuaAppbmRleCBhZjkxOTVlY2ViM2EuLmNlMTVlODAwZTYwNyAxMDA2NDQKLS0tIGEvZHJp
dmVycy9zdGFnaW5nL2dyZXlidXMvYXVkaW9fY29kZWMuaAorKysgYi9kcml2ZXJzL3N0YWdpbmcv
Z3JleWJ1cy9hdWRpb19jb2RlYy5oCkBAIC02Niw3ICs2Niw3IEBAIHN0cnVjdCBnYmF1ZGlvX2Nv
ZGVjX2RhaSB7CiAKIHN0cnVjdCBnYmF1ZGlvX2NvZGVjX2luZm8gewogCXN0cnVjdCBkZXZpY2Ug
KmRldjsKLQlzdHJ1Y3Qgc25kX3NvY19jb2RlYyAqY29kZWM7CisJc3RydWN0IHNuZF9zb2NfY29t
cG9uZW50ICpjb21wb25lbnQ7CiAJc3RydWN0IGxpc3RfaGVhZCBtb2R1bGVfbGlzdDsKIAkvKiB0
byBtYWludGFpbiBydW50aW1lIHN0cmVhbSBwYXJhbXMgZm9yIGVhY2ggREFJICovCiAJc3RydWN0
IGxpc3RfaGVhZCBkYWlfbGlzdDsKLS0gCjIuMjYuMgoKX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX18KZ3JleWJ1cy1kZXYgbWFpbGluZyBsaXN0CmdyZXlidXMt
ZGV2QGxpc3RzLmxpbmFyby5vcmcKaHR0cHM6Ly9saXN0cy5saW5hcm8ub3JnL21haWxtYW4vbGlz
dGluZm8vZ3JleWJ1cy1kZXYK
