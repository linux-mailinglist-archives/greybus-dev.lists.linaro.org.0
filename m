Return-Path: <greybus-dev-bounces@lists.linaro.org>
X-Original-To: lists+greybus-dev@lfdr.de
Delivered-To: lists+greybus-dev@lfdr.de
Received: from lists.linaro.org (lists.linaro.org [107.22.173.205])
	by mail.lfdr.de (Postfix) with ESMTPS id D4B6C1D6B8F
	for <lists+greybus-dev@lfdr.de>; Sun, 17 May 2020 19:37:37 +0200 (CEST)
Received: from lists.linaro.org (localhost [127.0.0.1])
	by lists.linaro.org (Postfix) with ESMTP id EE3926094E
	for <lists+greybus-dev@lfdr.de>; Sun, 17 May 2020 17:37:36 +0000 (UTC)
Received: by lists.linaro.org (Postfix, from userid 109)
	id E25C260988; Sun, 17 May 2020 17:37:36 +0000 (UTC)
X-Spam-Checker-Version: SpamAssassin 3.4.2 (2018-09-13) on lists.linaro.org
X-Spam-Level: 
X-Spam-Status: No, score=-7.9 required=5.0 tests=BAYES_00,MAILING_LIST_MULTI,
	RCVD_IN_DNSWL_HI,SPF_HELO_NONE autolearn=disabled version=3.4.2
Received: from lists.linaro.org (localhost [127.0.0.1])
	by lists.linaro.org (Postfix) with ESMTP id 16D4C6090B;
	Sun, 17 May 2020 17:37:14 +0000 (UTC)
X-Original-To: greybus-dev@lists.linaro.org
Delivered-To: greybus-dev@lists.linaro.org
Received: from lists.linaro.org (localhost [127.0.0.1])
 by lists.linaro.org (Postfix) with ESMTP id AF0EE60866
 for <greybus-dev@lists.linaro.org>; Sun, 17 May 2020 17:37:11 +0000 (UTC)
Received: by lists.linaro.org (Postfix, from userid 109)
 id 90C6F608DF; Sun, 17 May 2020 17:37:11 +0000 (UTC)
Received: from relay10.mail.gandi.net (relay10.mail.gandi.net [217.70.178.230])
 by lists.linaro.org (Postfix) with ESMTPS id 687CB60866
 for <greybus-dev@lists.linaro.org>; Sun, 17 May 2020 17:37:09 +0000 (UTC)
Received: from localhost (lfbn-lyo-1-1912-bdcst.w90-65.abo.wanadoo.fr
 [90.65.91.255]) (Authenticated sender: alexandre.belloni@bootlin.com)
 by relay10.mail.gandi.net (Postfix) with ESMTPSA id A176E240003;
 Sun, 17 May 2020 17:37:06 +0000 (UTC)
Date: Sun, 17 May 2020 19:37:06 +0200
From: Alexandre Belloni <alexandre.belloni@bootlin.com>
To: Vaibhav Agarwal <vaibhav.sr@gmail.com>
Message-ID: <20200517173706.GB34497@piout.net>
References: <cover.1589734179.git.vaibhav.sr@gmail.com>
 <c1339e4d57c8b39bd25197d4514fabd868b829b1.1589734179.git.vaibhav.sr@gmail.com>
MIME-Version: 1.0
Content-Disposition: inline
In-Reply-To: <c1339e4d57c8b39bd25197d4514fabd868b829b1.1589734179.git.vaibhav.sr@gmail.com>
X-Virus-Scanned: ClamAV using ClamSMTP
Cc: devel@driverdev.osuosl.org, Alex Elder <elder@kernel.org>,
 Johan Hovold <johan@kernel.org>, greybus-dev@lists.linaro.org,
 linux-kernel@vger.kernel.org
Subject: Re: [greybus-dev] [PATCH V1 5/6] staging: greybus: audio: Add
 helper APIs for dynamic audio modules
X-BeenThere: greybus-dev@lists.linaro.org
X-Mailman-Version: 2.1.16
Precedence: list
List-Id: Greybus Development Mail List <greybus-dev.lists.linaro.org>
List-Unsubscribe: <https://lists.linaro.org/mailman/options/greybus-dev>,
 <mailto:greybus-dev-request@lists.linaro.org?subject=unsubscribe>
List-Archive: <http://lists.linaro.org/pipermail/greybus-dev/>
List-Post: <mailto:greybus-dev@lists.linaro.org>
List-Help: <mailto:greybus-dev-request@lists.linaro.org?subject=help>
List-Subscribe: <https://lists.linaro.org/mailman/listinfo/greybus-dev>,
 <mailto:greybus-dev-request@lists.linaro.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: greybus-dev-bounces@lists.linaro.org
Sender: "greybus-dev" <greybus-dev-bounces@lists.linaro.org>
X-Virus-Scanned: ClamAV using ClamSMTP

SGksCgpPbiAxNy8wNS8yMDIwIDIyOjQ3OjIwKzA1MzAsIFZhaWJoYXYgQWdhcndhbCB3cm90ZToK
PiBHcmV5YnVzIENvZGVjIGRyaXZlciBhbGxvd3MgbW9kdWxlcyB0byBiZSBkeW5hbWljYWxseSBh
ZGRlZCBhbmQgcmVtb3ZlZCwKPiB3aGljaCBmdXJ0aGVyIHJlcXVpcmVzIHVwZGF0aW5nIHRoZSBE
QVBNIGNvbmZpZ3VyYXRpb25zIGFzIHdlbGwuCj4gCj4gV2l0aCBjdXJyZW50IHNuZF9zb2MgYXJj
aGl0ZWN0dXJlLCBkeW5hbWljIGF1ZGlvIG1vZHVsZXMgaXMgbm90IHlldAo+IHN1cHBvcnRlZC4g
VGhpcyBwYXRjaCBwcm92aWRlcyBoZWxwZXIgQVBJcyB0byB1cGRhdGUgREFQTSBjb25maWd1cmF0
aW9ucwo+IGluIHJlc3BvbnNlIHRvIG1vZHVsZXMgd2hpY2ggYXJlIGR5bmFtaWNhbGx5IGFkZGVk
IG9yIHJlbW92ZWQuIFRoZQo+IHNvdXJjZSBpcyBwcmltYXJpbHkgYmFzZWQgb24gc25kX2RhcG0u
Ywo+IAoKSSByZWFsbHkgdGhpbmsgeW91IHNob3VsZCBzZW5kIHRoaXMgcGF0Y2ggc2VyaWVzIHRv
IHRoZSBBU29DCm1haW50YWluZXJzLCBlc3BlY2lhbGx5IHRoaXMgcGF0Y2guIFRoZSBtYWluIGdv
YWwgc2hvdWxkbid0IGJlIHRvIHNpbXBseQpmaXggY29tcGlsYXRpb24gaXNzdWVzIGJ1dCB0byB0
cnkgdG8gZ2V0IHRoZSBkcml2ZXIgb3V0IG9mIHN0YWdpbmcgZWxzZSwKdGhlIGN1cnJlbnQgc2l0
dWF0aW9uIHdpbGwgaGFwcGVuIGFnYWluLgoKPiBTaWduZWQtb2ZmLWJ5OiBWYWliaGF2IEFnYXJ3
YWwgPHZhaWJoYXYuc3JAZ21haWwuY29tPgo+IC0tLQo+ICBkcml2ZXJzL3N0YWdpbmcvZ3JleWJ1
cy9NYWtlZmlsZSAgICAgICB8ICAgMiArLQo+ICBkcml2ZXJzL3N0YWdpbmcvZ3JleWJ1cy9hdWRp
b19jb2RlYy5jICB8ICAxMyArKy0KPiAgZHJpdmVycy9zdGFnaW5nL2dyZXlidXMvYXVkaW9faGVs
cGVyLmMgfCAxOTcgKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrCj4gIGRyaXZlcnMv
c3RhZ2luZy9ncmV5YnVzL2F1ZGlvX2hlbHBlci5oIHwgIDE3ICsrKwo+ICA0IGZpbGVzIGNoYW5n
ZWQsIDIyNCBpbnNlcnRpb25zKCspLCA1IGRlbGV0aW9ucygtKQo+ICBjcmVhdGUgbW9kZSAxMDA2
NDQgZHJpdmVycy9zdGFnaW5nL2dyZXlidXMvYXVkaW9faGVscGVyLmMKPiAgY3JlYXRlIG1vZGUg
MTAwNjQ0IGRyaXZlcnMvc3RhZ2luZy9ncmV5YnVzL2F1ZGlvX2hlbHBlci5oCj4gCj4gZGlmZiAt
LWdpdCBhL2RyaXZlcnMvc3RhZ2luZy9ncmV5YnVzL01ha2VmaWxlIGIvZHJpdmVycy9zdGFnaW5n
L2dyZXlidXMvTWFrZWZpbGUKPiBpbmRleCA2MjdlNDRmMmE5ODMuLjNiNGI2Y2FiZmYxOSAxMDA2
NDQKPiAtLS0gYS9kcml2ZXJzL3N0YWdpbmcvZ3JleWJ1cy9NYWtlZmlsZQo+ICsrKyBiL2RyaXZl
cnMvc3RhZ2luZy9ncmV5YnVzL01ha2VmaWxlCj4gQEAgLTI4LDcgKzI4LDcgQEAgb2JqLSQoQ09O
RklHX0dSRVlCVVNfVklCUkFUT1IpCSs9IGdiLXZpYnJhdG9yLm8KPiAgCj4gICMgR3JleWJ1cyBB
dWRpbyBpcyBhIGJ1bmNoIG9mIG1vZHVsZXMKPiAgZ2ItYXVkaW8tbW9kdWxlLXkJOj0gYXVkaW9f
bW9kdWxlLm8gYXVkaW9fdG9wb2xvZ3kubwo+IC1nYi1hdWRpby1jb2RlYy15CTo9IGF1ZGlvX2Nv
ZGVjLm8KPiArZ2ItYXVkaW8tY29kZWMteQk6PSBhdWRpb19jb2RlYy5vIGF1ZGlvX2hlbHBlci5v
Cj4gIGdiLWF1ZGlvLWdiLXkJCTo9IGF1ZGlvX2diLm8KPiAgZ2ItYXVkaW8tYXBicmlkZ2VhLXkJ
Oj0gYXVkaW9fYXBicmlkZ2VhLm8KPiAgZ2ItYXVkaW8tbWFuYWdlci15CTo9IGF1ZGlvX21hbmFn
ZXIubyBhdWRpb19tYW5hZ2VyX21vZHVsZS5vCj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvc3RhZ2lu
Zy9ncmV5YnVzL2F1ZGlvX2NvZGVjLmMgYi9kcml2ZXJzL3N0YWdpbmcvZ3JleWJ1cy9hdWRpb19j
b2RlYy5jCj4gaW5kZXggYmJkMDcyYWNkYTVjLi44NjZiMzM0MjUxNWYgMTAwNjQ0Cj4gLS0tIGEv
ZHJpdmVycy9zdGFnaW5nL2dyZXlidXMvYXVkaW9fY29kZWMuYwo+ICsrKyBiL2RyaXZlcnMvc3Rh
Z2luZy9ncmV5YnVzL2F1ZGlvX2NvZGVjLmMKPiBAQCAtMTQsNiArMTQsNyBAQAo+ICAjaW5jbHVk
ZSAiYXVkaW9fY29kZWMuaCIKPiAgI2luY2x1ZGUgImF1ZGlvX2FwYnJpZGdlYS5oIgo+ICAjaW5j
bHVkZSAiYXVkaW9fbWFuYWdlci5oIgo+ICsjaW5jbHVkZSAiYXVkaW9faGVscGVyLmgiCj4gIAo+
ICBzdGF0aWMgc3RydWN0IGdiYXVkaW9fY29kZWNfaW5mbyAqZ2Jjb2RlYzsKPiAgCj4gQEAgLTg3
NCw3ICs4NzUsNyBAQCBpbnQgZ2JhdWRpb19yZWdpc3Rlcl9tb2R1bGUoc3RydWN0IGdiYXVkaW9f
bW9kdWxlX2luZm8gKm1vZHVsZSkKPiAgCj4gIAkvKiBjYXJkIGFscmVhZHkgaW5zdGFudGlhdGVk
LCBjcmVhdGUgd2lkZ2V0cyBoZXJlIG9ubHkgKi8KPiAgCWlmIChjb21wb25lbnQtPmNhcmQtPmlu
c3RhbnRpYXRlZCkgewo+IC0JCXNuZF9zb2NfZGFwbV9saW5rX2NvbXBvbmVudF9kYWlfd2lkZ2V0
cyhjb21wb25lbnQtPmNhcmQsCj4gKwkJZ2JhdWRpb19kYXBtX2xpbmtfY29tcG9uZW50X2RhaV93
aWRnZXRzKGNvbXBvbmVudC0+Y2FyZCwKPiAgCQkJCQkJCSZjb21wb25lbnQtPmRhcG0pOwo+ICAj
aWZkZWYgQ09ORklHX1NORF9KQUNLCj4gIAkJLyoKPiBAQCAtMTAwNCwxOSArMTAwNSwyMyBAQCB2
b2lkIGdiYXVkaW9fdW5yZWdpc3Rlcl9tb2R1bGUoc3RydWN0IGdiYXVkaW9fbW9kdWxlX2luZm8g
Km1vZHVsZSkKPiAgCWlmIChtb2R1bGUtPmRhcG1fcm91dGVzKSB7Cj4gIAkJZGV2X2RiZyhjb21w
b25lbnQtPmRldiwgIlJlbW92aW5nICVkIHJvdXRlc1xuIiwKPiAgCQkJbW9kdWxlLT5udW1fZGFw
bV9yb3V0ZXMpOwo+ICsJCS8qIHZlcmlmeSByb3V0ZXMgd2l0aCBjb250cm9scyBhcmUgcmVtb3Zl
ZCAqLwo+ICAJCXNuZF9zb2NfZGFwbV9kZWxfcm91dGVzKCZjb21wb25lbnQtPmRhcG0sIG1vZHVs
ZS0+ZGFwbV9yb3V0ZXMsCj4gIAkJCQkJbW9kdWxlLT5udW1fZGFwbV9yb3V0ZXMpOwo+ICAJfQo+
ICAJaWYgKG1vZHVsZS0+Y29udHJvbHMpIHsKPiAgCQlkZXZfZGJnKGNvbXBvbmVudC0+ZGV2LCAi
UmVtb3ZpbmcgJWQgY29udHJvbHNcbiIsCj4gIAkJCW1vZHVsZS0+bnVtX2NvbnRyb2xzKTsKPiAt
CQlzbmRfc29jX3JlbW92ZV9jb2RlY19jb250cm9scyhjb21wb25lbnQsIG1vZHVsZS0+Y29udHJv
bHMsCj4gLQkJCQkJICAgICAgbW9kdWxlLT5udW1fY29udHJvbHMpOwo+ICsJCS8qIHJlbGVhc2Ug
Y29udHJvbCBzZW1hcGhvcmUgKi8KPiArCQl1cF93cml0ZSgmY2FyZC0+Y29udHJvbHNfcndzZW0p
Owo+ICsJCWdiYXVkaW9fcmVtb3ZlX2NvbXBvbmVudF9jb250cm9scyhjb21wb25lbnQsIG1vZHVs
ZS0+Y29udHJvbHMsCj4gKwkJCQkJCSAgbW9kdWxlLT5udW1fY29udHJvbHMpOwo+ICsJCWRvd25f
d3JpdGUoJmNhcmQtPmNvbnRyb2xzX3J3c2VtKTsKPiAgCX0KPiAgCWlmIChtb2R1bGUtPmRhcG1f
d2lkZ2V0cykgewo+ICAJCWRldl9kYmcoY29tcG9uZW50LT5kZXYsICJSZW1vdmluZyAlZCB3aWRn
ZXRzXG4iLAo+ICAJCQltb2R1bGUtPm51bV9kYXBtX3dpZGdldHMpOwo+IC0JCXNuZF9zb2NfZGFw
bV9mcmVlX2NvbnRyb2xzKCZjb21wb25lbnQtPmRhcG0sCj4gKwkJZ2JhdWRpb19kYXBtX2ZyZWVf
Y29udHJvbHMoJmNvbXBvbmVudC0+ZGFwbSwKPiAgCQkJCQkgICBtb2R1bGUtPmRhcG1fd2lkZ2V0
cywKPiAgCQkJCQkgICBtb2R1bGUtPm51bV9kYXBtX3dpZGdldHMpOwo+ICAJfQo+IGRpZmYgLS1n
aXQgYS9kcml2ZXJzL3N0YWdpbmcvZ3JleWJ1cy9hdWRpb19oZWxwZXIuYyBiL2RyaXZlcnMvc3Rh
Z2luZy9ncmV5YnVzL2F1ZGlvX2hlbHBlci5jCj4gbmV3IGZpbGUgbW9kZSAxMDA2NDQKPiBpbmRl
eCAwMDAwMDAwMDAwMDAuLmUyZjExM2E4MTFlZQo+IC0tLSAvZGV2L251bGwKPiArKysgYi9kcml2
ZXJzL3N0YWdpbmcvZ3JleWJ1cy9hdWRpb19oZWxwZXIuYwo+IEBAIC0wLDAgKzEsMTk3IEBACj4g
Ky8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBHUEwtMi4wCj4gKy8qCj4gKyAqIEdyZXlidXMg
QXVkaW8gU291bmQgU29DIGhlbHBlciBBUElzCj4gKyAqLwo+ICsKPiArI2luY2x1ZGUgPGxpbnV4
L2RlYnVnZnMuaD4KPiArI2luY2x1ZGUgPHNvdW5kL2NvcmUuaD4KPiArI2luY2x1ZGUgPHNvdW5k
L3NvYy5oPgo+ICsjaW5jbHVkZSA8c291bmQvc29jLWRhcG0uaD4KPiArCj4gKyNkZWZpbmUgZ2Jh
dWRpb19kYXBtX2Zvcl9lYWNoX2RpcmVjdGlvbihkaXIpIFwKPiArCWZvciAoKGRpcikgPSBTTkRf
U09DX0RBUE1fRElSX0lOOyAoZGlyKSA8PSBTTkRfU09DX0RBUE1fRElSX09VVDsgXAo+ICsJCShk
aXIpKyspCj4gKwo+ICtzdGF0aWMgdm9pZCBnYmF1ZGlvX2RhcG1fbGlua19kYWlfd2lkZ2V0KHN0
cnVjdCBzbmRfc29jX2RhcG1fd2lkZ2V0ICpkYWlfdywKPiArCQkJCQkgc3RydWN0IHNuZF9zb2Nf
Y2FyZCAqY2FyZCkKPiArewo+ICsJc3RydWN0IHNuZF9zb2NfZGFwbV93aWRnZXQgKnc7Cj4gKwlz
dHJ1Y3Qgc25kX3NvY19kYXBtX3dpZGdldCAqc3JjLCAqc2luazsKPiArCXN0cnVjdCBzbmRfc29j
X2RhaSAqZGFpID0gZGFpX3ctPnByaXY7Cj4gKwo+ICsJLyogLi4uZmluZCBhbGwgd2lkZ2V0cyB3
aXRoIHRoZSBzYW1lIHN0cmVhbSBhbmQgbGluayB0aGVtICovCj4gKwlsaXN0X2Zvcl9lYWNoX2Vu
dHJ5KHcsICZjYXJkLT53aWRnZXRzLCBsaXN0KSB7Cj4gKwkJaWYgKHctPmRhcG0gIT0gZGFpX3ct
PmRhcG0pCj4gKwkJCWNvbnRpbnVlOwo+ICsKPiArCQlzd2l0Y2ggKHctPmlkKSB7Cj4gKwkJY2Fz
ZSBzbmRfc29jX2RhcG1fZGFpX2luOgo+ICsJCWNhc2Ugc25kX3NvY19kYXBtX2RhaV9vdXQ6Cj4g
KwkJCWNvbnRpbnVlOwo+ICsJCWRlZmF1bHQ6Cj4gKwkJCWJyZWFrOwo+ICsJCX0KPiArCj4gKwkJ
aWYgKCF3LT5zbmFtZSB8fCAhc3Ryc3RyKHctPnNuYW1lLCBkYWlfdy0+c25hbWUpKQo+ICsJCQlj
b250aW51ZTsKPiArCj4gKwkJLyoKPiArCQkgKiBjaGVjayBpZiB3aWRnZXQgaXMgYWxyZWFkeSBs
aW5rZWQsCj4gKwkJICogaWYgKHctPmxpbmtlZCkKPiArCQkgKglyZXR1cm47Cj4gKwkJICovCj4g
Kwo+ICsJCWlmIChkYWlfdy0+aWQgPT0gc25kX3NvY19kYXBtX2RhaV9pbikgewo+ICsJCQlzcmMg
PSBkYWlfdzsKPiArCQkJc2luayA9IHc7Cj4gKwkJfSBlbHNlIHsKPiArCQkJc3JjID0gdzsKPiAr
CQkJc2luayA9IGRhaV93Owo+ICsJCX0KPiArCQlkZXZfZGJnKGRhaS0+ZGV2LCAiJXMgLT4gJXNc
biIsIHNyYy0+bmFtZSwgc2luay0+bmFtZSk7Cj4gKwkJLyogQWRkIHRoZSBEQVBNIHBhdGggYW5k
IHNldCB3aWRnZXQncyBsaW5rZWQgc3RhdHVzCj4gKwkJICogc25kX3NvY19kYXBtX2FkZF9wYXRo
KHctPmRhcG0sIHNyYywgc2luaywgTlVMTCwgTlVMTCk7Cj4gKwkJICogdy0+bGlua2VkID0gMTsK
PiArCQkgKi8KPiArCX0KPiArfQo+ICsKPiAraW50IGdiYXVkaW9fZGFwbV9saW5rX2NvbXBvbmVu
dF9kYWlfd2lkZ2V0cyhzdHJ1Y3Qgc25kX3NvY19jYXJkICpjYXJkLAo+ICsJCQkJCSAgICBzdHJ1
Y3Qgc25kX3NvY19kYXBtX2NvbnRleHQgKmRhcG0pCj4gK3sKPiArCXN0cnVjdCBzbmRfc29jX2Rh
cG1fd2lkZ2V0ICpkYWlfdzsKPiArCj4gKwkvKiBGb3IgZWFjaCBEQUkgd2lkZ2V0Li4uICovCj4g
KwlsaXN0X2Zvcl9lYWNoX2VudHJ5KGRhaV93LCAmY2FyZC0+d2lkZ2V0cywgbGlzdCkgewo+ICsJ
CWlmIChkYWlfdy0+ZGFwbSAhPSBkYXBtKQo+ICsJCQljb250aW51ZTsKPiArCQlzd2l0Y2ggKGRh
aV93LT5pZCkgewo+ICsJCWNhc2Ugc25kX3NvY19kYXBtX2RhaV9pbjoKPiArCQljYXNlIHNuZF9z
b2NfZGFwbV9kYWlfb3V0Ogo+ICsJCQlicmVhazsKPiArCQlkZWZhdWx0Ogo+ICsJCQljb250aW51
ZTsKPiArCQl9Cj4gKwkJZ2JhdWRpb19kYXBtX2xpbmtfZGFpX3dpZGdldChkYWlfdywgY2FyZCk7
Cj4gKwl9Cj4gKwo+ICsJcmV0dXJuIDA7Cj4gK30KPiArCj4gK3N0YXRpYyB2b2lkIGdiYXVkaW9f
ZGFwbV9mcmVlX3BhdGgoc3RydWN0IHNuZF9zb2NfZGFwbV9wYXRoICpwYXRoKQo+ICt7Cj4gKwls
aXN0X2RlbCgmcGF0aC0+bGlzdF9ub2RlW1NORF9TT0NfREFQTV9ESVJfSU5dKTsKPiArCWxpc3Rf
ZGVsKCZwYXRoLT5saXN0X25vZGVbU05EX1NPQ19EQVBNX0RJUl9PVVRdKTsKPiArCWxpc3RfZGVs
KCZwYXRoLT5saXN0X2tjb250cm9sKTsKPiArCWxpc3RfZGVsKCZwYXRoLT5saXN0KTsKPiArCWtm
cmVlKHBhdGgpOwo+ICt9Cj4gKwo+ICtzdGF0aWMgdm9pZCBnYmF1ZGlvX2RhcG1fZnJlZV93aWRn
ZXQoc3RydWN0IHNuZF9zb2NfZGFwbV93aWRnZXQgKncpCj4gK3sKPiArCXN0cnVjdCBzbmRfc29j
X2RhcG1fcGF0aCAqcCwgKm5leHRfcDsKPiArCWVudW0gc25kX3NvY19kYXBtX2RpcmVjdGlvbiBk
aXI7Cj4gKwo+ICsJbGlzdF9kZWwoJnctPmxpc3QpOwo+ICsJLyoKPiArCSAqIHJlbW92ZSBzb3Vy
Y2UgYW5kIHNpbmsgcGF0aHMgYXNzb2NpYXRlZCB0byB0aGlzIHdpZGdldC4KPiArCSAqIFdoaWxl
IHJlbW92aW5nIHRoZSBwYXRoLCByZW1vdmUgcmVmZXJlbmNlIHRvIGl0IGZyb20gYm90aAo+ICsJ
ICogc291cmNlIGFuZCBzaW5rIHdpZGdldHMgc28gdGhhdCBwYXRoIGlzIHJlbW92ZWQgb25seSBv
bmNlLgo+ICsJICovCj4gKwlnYmF1ZGlvX2RhcG1fZm9yX2VhY2hfZGlyZWN0aW9uKGRpcikgewo+
ICsJCXNuZF9zb2NfZGFwbV93aWRnZXRfZm9yX2VhY2hfcGF0aF9zYWZlKHcsIGRpciwgcCwgbmV4
dF9wKQo+ICsJCQlnYmF1ZGlvX2RhcG1fZnJlZV9wYXRoKHApOwo+ICsJfQo+ICsKPiArCWtmcmVl
KHctPmtjb250cm9scyk7Cj4gKwlrZnJlZV9jb25zdCh3LT5uYW1lKTsKPiArCWtmcmVlX2NvbnN0
KHctPnNuYW1lKTsKPiArCWtmcmVlKHcpOwo+ICt9Cj4gKwo+ICtpbnQgZ2JhdWRpb19kYXBtX2Zy
ZWVfY29udHJvbHMoc3RydWN0IHNuZF9zb2NfZGFwbV9jb250ZXh0ICpkYXBtLAo+ICsJCQkgICAg
ICAgY29uc3Qgc3RydWN0IHNuZF9zb2NfZGFwbV93aWRnZXQgKndpZGdldCwKPiArCQkJICAgICAg
IGludCBudW0pCj4gK3sKPiArCWludCBpOwo+ICsJc3RydWN0IHNuZF9zb2NfZGFwbV93aWRnZXQg
KncsICpuZXh0X3c7Cj4gKyNpZmRlZiBDT05GSUdfREVCVUdfRlMKPiArCXN0cnVjdCBkZW50cnkg
KnBhcmVudCA9IGRhcG0tPmRlYnVnZnNfZGFwbTsKPiArCXN0cnVjdCBkZW50cnkgKmRlYnVnZnNf
dyA9IE5VTEw7Cj4gKyNlbmRpZgo+ICsKPiArCW11dGV4X2xvY2soJmRhcG0tPmNhcmQtPmRhcG1f
bXV0ZXgpOwo+ICsJZm9yIChpID0gMDsgaSA8IG51bTsgaSsrKSB7Cj4gKwkJLyogYmVsb3cgbG9n
aWMgY2FuIGJlIG9wdGltaXplZCB0byBpZGVudGlmeSB3aWRnZXQgcG9pbnRlciAqLwo+ICsJCWxp
c3RfZm9yX2VhY2hfZW50cnlfc2FmZSh3LCBuZXh0X3csICZkYXBtLT5jYXJkLT53aWRnZXRzLAo+
ICsJCQkJCSBsaXN0KSB7Cj4gKwkJCWlmICh3LT5kYXBtICE9IGRhcG0pCj4gKwkJCQljb250aW51
ZTsKPiArCQkJaWYgKCFzdHJjbXAody0+bmFtZSwgd2lkZ2V0LT5uYW1lKSkKPiArCQkJCWJyZWFr
Owo+ICsJCQl3ID0gTlVMTDsKPiArCQl9Cj4gKwkJaWYgKCF3KSB7Cj4gKwkJCWRldl9lcnIoZGFw
bS0+ZGV2LCAiJXM6IHdpZGdldCBub3QgZm91bmRcbiIsCj4gKwkJCQl3aWRnZXQtPm5hbWUpOwo+
ICsJCQlyZXR1cm4gLUVJTlZBTDsKPiArCQl9Cj4gKwkJd2lkZ2V0Kys7Cj4gKyNpZmRlZiBDT05G
SUdfREVCVUdfRlMKPiArCQlpZiAoIXBhcmVudCkKPiArCQkJZGVidWdmc193ID0gZGVidWdmc19s
b29rdXAody0+bmFtZSwgcGFyZW50KTsKPiArCQlkZWJ1Z2ZzX3JlbW92ZShkZWJ1Z2ZzX3cpOwo+
ICsJCWRlYnVnZnNfdyA9IE5VTEw7Cj4gKyNlbmRpZgo+ICsJCWdiYXVkaW9fZGFwbV9mcmVlX3dp
ZGdldCh3KTsKPiArCX0KPiArCW11dGV4X3VubG9jaygmZGFwbS0+Y2FyZC0+ZGFwbV9tdXRleCk7
Cj4gKwlyZXR1cm4gMDsKPiArfQo+ICsKPiArc3RhdGljIGludCBnYmF1ZGlvX3JlbW92ZV9jb250
cm9scyhzdHJ1Y3Qgc25kX2NhcmQgKmNhcmQsIHN0cnVjdCBkZXZpY2UgKmRldiwKPiArCQkJCSAg
IGNvbnN0IHN0cnVjdCBzbmRfa2NvbnRyb2xfbmV3ICpjb250cm9scywKPiArCQkJCSAgIGludCBu
dW1fY29udHJvbHMsIGNvbnN0IGNoYXIgKnByZWZpeCkKPiArewo+ICsJaW50IGksIGVycjsKPiAr
Cj4gKwlmb3IgKGkgPSAwOyBpIDwgbnVtX2NvbnRyb2xzOyBpKyspIHsKPiArCQljb25zdCBzdHJ1
Y3Qgc25kX2tjb250cm9sX25ldyAqY29udHJvbCA9ICZjb250cm9sc1tpXTsKPiArCQlzdHJ1Y3Qg
c25kX2N0bF9lbGVtX2lkIGlkOwo+ICsJCXN0cnVjdCBzbmRfa2NvbnRyb2wgKmtjdGw7Cj4gKwo+
ICsJCWlmIChwcmVmaXgpCj4gKwkJCXNucHJpbnRmKGlkLm5hbWUsIHNpemVvZihpZC5uYW1lKSwg
IiVzICVzIiwgcHJlZml4LAo+ICsJCQkJIGNvbnRyb2wtPm5hbWUpOwo+ICsJCWVsc2UKPiArCQkJ
c3RybGNweShpZC5uYW1lLCBjb250cm9sLT5uYW1lLCBzaXplb2YoaWQubmFtZSkpOwo+ICsJCWlk
Lm51bWlkID0gMDsKPiArCQlpZC5pZmFjZSA9IGNvbnRyb2wtPmlmYWNlOwo+ICsJCWlkLmRldmlj
ZSA9IGNvbnRyb2wtPmRldmljZTsKPiArCQlpZC5zdWJkZXZpY2UgPSBjb250cm9sLT5zdWJkZXZp
Y2U7Cj4gKwkJaWQuaW5kZXggPSBjb250cm9sLT5pbmRleDsKPiArCQlrY3RsID0gc25kX2N0bF9m
aW5kX2lkKGNhcmQsICZpZCk7Cj4gKwkJaWYgKCFrY3RsKSB7Cj4gKwkJCWRldl9lcnIoZGV2LCAi
JWQ6IEZhaWxlZCB0byBmaW5kICVzXG4iLCBlcnIsCj4gKwkJCQljb250cm9sLT5uYW1lKTsKPiAr
CQkJcmV0dXJuIC1FTk9FTlQ7Cj4gKwkJfQo+ICsJCWVyciA9IHNuZF9jdGxfcmVtb3ZlKGNhcmQs
IGtjdGwpOwo+ICsJCWlmIChlcnIgPCAwKSB7Cj4gKwkJCWRldl9lcnIoZGV2LCAiJWQ6IEZhaWxl
ZCB0byByZW1vdmUgJXNcbiIsIGVyciwKPiArCQkJCWNvbnRyb2wtPm5hbWUpOwo+ICsJCQlyZXR1
cm4gZXJyOwo+ICsJCX0KPiArCX0KPiArCXJldHVybiAwOwo+ICt9Cj4gKwo+ICtpbnQgZ2JhdWRp
b19yZW1vdmVfY29tcG9uZW50X2NvbnRyb2xzKHN0cnVjdCBzbmRfc29jX2NvbXBvbmVudCAqY29t
cG9uZW50LAo+ICsJCQkJICAgICAgY29uc3Qgc3RydWN0IHNuZF9rY29udHJvbF9uZXcgKmNvbnRy
b2xzLAo+ICsJCQkJICAgICAgdW5zaWduZWQgaW50IG51bV9jb250cm9scykKPiArewo+ICsJc3Ry
dWN0IHNuZF9jYXJkICpjYXJkID0gY29tcG9uZW50LT5jYXJkLT5zbmRfY2FyZDsKPiArCj4gKwly
ZXR1cm4gZ2JhdWRpb19yZW1vdmVfY29udHJvbHMoY2FyZCwgY29tcG9uZW50LT5kZXYsIGNvbnRy
b2xzLAo+ICsJCQkJICAgICAgIG51bV9jb250cm9scywgY29tcG9uZW50LT5uYW1lX3ByZWZpeCk7
Cj4gK30KPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9zdGFnaW5nL2dyZXlidXMvYXVkaW9faGVscGVy
LmggYi9kcml2ZXJzL3N0YWdpbmcvZ3JleWJ1cy9hdWRpb19oZWxwZXIuaAo+IG5ldyBmaWxlIG1v
ZGUgMTAwNjQ0Cj4gaW5kZXggMDAwMDAwMDAwMDAwLi41Y2YxYzZkN2QzZWEKPiAtLS0gL2Rldi9u
dWxsCj4gKysrIGIvZHJpdmVycy9zdGFnaW5nL2dyZXlidXMvYXVkaW9faGVscGVyLmgKPiBAQCAt
MCwwICsxLDE3IEBACj4gKy8qIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBHUEwtMi4wICovCj4g
Ky8qCj4gKyAqIEdyZXlidXMgQXVkaW8gU291bmQgU29DIGhlbHBlciBBUElzCj4gKyAqLwo+ICsK
PiArI2lmbmRlZiBfX0xJTlVYX0dCQVVESU9fSEVMUEVSX0gKPiArI2RlZmluZSBfX0xJTlVYX0dC
QVVESU9fSEVMUEVSX0gKPiArCj4gK2ludCBnYmF1ZGlvX2RhcG1fbGlua19jb21wb25lbnRfZGFp
X3dpZGdldHMoc3RydWN0IHNuZF9zb2NfY2FyZCAqY2FyZCwKPiArCQkJCQkgICAgc3RydWN0IHNu
ZF9zb2NfZGFwbV9jb250ZXh0ICpkYXBtKTsKPiAraW50IGdiYXVkaW9fZGFwbV9mcmVlX2NvbnRy
b2xzKHN0cnVjdCBzbmRfc29jX2RhcG1fY29udGV4dCAqZGFwbSwKPiArCQkJICAgICAgIGNvbnN0
IHN0cnVjdCBzbmRfc29jX2RhcG1fd2lkZ2V0ICp3aWRnZXQsCj4gKwkJCSAgICAgICBpbnQgbnVt
KTsKPiAraW50IGdiYXVkaW9fcmVtb3ZlX2NvbXBvbmVudF9jb250cm9scyhzdHJ1Y3Qgc25kX3Nv
Y19jb21wb25lbnQgKmNvbXBvbmVudCwKPiArCQkJCSAgICAgIGNvbnN0IHN0cnVjdCBzbmRfa2Nv
bnRyb2xfbmV3ICpjb250cm9scywKPiArCQkJCSAgICAgIHVuc2lnbmVkIGludCBudW1fY29udHJv
bHMpOwo+ICsjZW5kaWYKPiAtLSAKPiAyLjcuNAo+IAoKLS0gCkFsZXhhbmRyZSBCZWxsb25pLCBC
b290bGluCkVtYmVkZGVkIExpbnV4IGFuZCBLZXJuZWwgZW5naW5lZXJpbmcKaHR0cHM6Ly9ib290
bGluLmNvbQpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpn
cmV5YnVzLWRldiBtYWlsaW5nIGxpc3QKZ3JleWJ1cy1kZXZAbGlzdHMubGluYXJvLm9yZwpodHRw
czovL2xpc3RzLmxpbmFyby5vcmcvbWFpbG1hbi9saXN0aW5mby9ncmV5YnVzLWRldgo=
