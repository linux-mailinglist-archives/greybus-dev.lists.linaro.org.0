Return-Path: <greybus-dev-bounces@lists.linaro.org>
X-Original-To: lists+greybus-dev@lfdr.de
Delivered-To: lists+greybus-dev@lfdr.de
Received: from lists.linaro.org (lists.linaro.org [107.22.173.205])
	by mail.lfdr.de (Postfix) with ESMTPS id 7A7BC219DCE
	for <lists+greybus-dev@lfdr.de>; Thu,  9 Jul 2020 12:29:46 +0200 (CEST)
Received: from lists.linaro.org (localhost [127.0.0.1])
	by lists.linaro.org (Postfix) with ESMTP id 9F44261624
	for <lists+greybus-dev@lfdr.de>; Thu,  9 Jul 2020 10:29:45 +0000 (UTC)
Received: by lists.linaro.org (Postfix, from userid 109)
	id 924306180F; Thu,  9 Jul 2020 10:29:45 +0000 (UTC)
X-Spam-Checker-Version: SpamAssassin 3.4.2 (2018-09-13) on lists.linaro.org
X-Spam-Level: 
X-Spam-Status: No, score=-2.9 required=5.0 tests=BAYES_00,DKIM_ADSP_CUSTOM_MED,
	FREEMAIL_FROM,MAILING_LIST_MULTI,RCVD_IN_DNSWL_NONE,RCVD_IN_MSPIKE_H3,
	RCVD_IN_MSPIKE_WL,SPF_HELO_NONE autolearn=disabled version=3.4.2
Received: from lists.linaro.org (localhost [127.0.0.1])
	by lists.linaro.org (Postfix) with ESMTP id DCBDD66460;
	Thu,  9 Jul 2020 10:29:00 +0000 (UTC)
X-Original-To: greybus-dev@lists.linaro.org
Delivered-To: greybus-dev@lists.linaro.org
Received: from lists.linaro.org (localhost [127.0.0.1])
 by lists.linaro.org (Postfix) with ESMTP id 0512C6180F
 for <greybus-dev@lists.linaro.org>; Thu,  9 Jul 2020 10:28:52 +0000 (UTC)
Received: by lists.linaro.org (Postfix, from userid 109)
 id E6A1E66460; Thu,  9 Jul 2020 10:28:51 +0000 (UTC)
Received: from mail-pl1-f193.google.com (mail-pl1-f193.google.com
 [209.85.214.193])
 by lists.linaro.org (Postfix) with ESMTPS id BFC3966553
 for <greybus-dev@lists.linaro.org>; Thu,  9 Jul 2020 10:28:19 +0000 (UTC)
Received: by mail-pl1-f193.google.com with SMTP id k4so653820pld.12
 for <greybus-dev@lists.linaro.org>; Thu, 09 Jul 2020 03:28:19 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=/EG20tIDTCzthljxyo6PXMk7xchJ/qej5fX9u4QlLck=;
 b=IknqiD/HR7qD/jbp+Va8EGsMXfpTqhrbs9oEILXcQZAZ1qiJd9npHkOT+Ev/Wg7GWm
 Z4fawYVaLJPEJG//05n4tm+Nt+7drRc2h5+Z/2oGPwDKoEUOWe5qIt6eW0amtIfW83E5
 jWScfQXYVOabIk+QgOFd9RxHUSjwwse3zimKCv+ch7IPHbTdOZaPeKsZAOzg3iEgjyDt
 +PUjp14tc+H6kJ8BllP/wylvy4Xd4VSNvexLfkgsPdjOTMCaNkHPjEyXRB1IpCNXXB6g
 CPKPbxHJnVCXXIeJw2pB0V1ahDQHtgSPGV57q78ll0fp1SruflidQEY7ySiFwaEuN+Nm
 Fd3w==
X-Gm-Message-State: AOAM533c9a3uDS59kpdfd6zGUvpgi5jxgrq7p1ln6IWbkTKI4sWEv75W
 8cbaAZ/CYXrMXNTn9gP9bek=
X-Google-Smtp-Source: ABdhPJzFWN306ECkrJvpYKRvNdI3aQoGs7do/QU+1Bp0IkooHRGYTL8OHkcuaRaQknD1fk/l+xILuA==
X-Received: by 2002:a17:90a:158f:: with SMTP id
 m15mr14001014pja.93.1594290498767; 
 Thu, 09 Jul 2020 03:28:18 -0700 (PDT)
Received: from cvds-vagarw7.iind.intel.com ([192.55.54.40])
 by smtp.googlemail.com with ESMTPSA id y8sm2125163pju.49.2020.07.09.03.28.11
 (version=TLS1_2 cipher=ECDHE-ECDSA-AES128-GCM-SHA256 bits=128/128);
 Thu, 09 Jul 2020 03:28:18 -0700 (PDT)
From: Vaibhav Agarwal <vaibhav.sr@gmail.com>
To: Greg Kroah-Hartman <gregkh@linuxfoundation.org>,
 Alex Elder <elder@kernel.org>, Johan Hovold <johan@kernel.org>,
 Mark Greer <mgreer@animalcreek.com>
Date: Thu,  9 Jul 2020 15:57:21 +0530
Message-Id: <35e1baaae10a3f2162e71be4c2f75a701584f0e6.1594290158.git.vaibhav.sr@gmail.com>
X-Mailer: git-send-email 2.27.0
In-Reply-To: <cover.1594290158.git.vaibhav.sr@gmail.com>
References: <cover.1594290158.git.vaibhav.sr@gmail.com>
MIME-Version: 1.0
X-Virus-Scanned: ClamAV using ClamSMTP
Cc: devel@driverdev.osuosl.org,
 Alexandre Belloni <alexandre.belloni@bootlin.com>,
 linux-kernel@vger.kernel.org, greybus-dev@lists.linaro.org,
 Dan Carpenter <dan.carpenter@oracle.com>
Subject: [greybus-dev] [PATCH v4 5/7] staging: greybus: audio: Add helper
	APIs for dynamic audio modules
X-BeenThere: greybus-dev@lists.linaro.org
X-Mailman-Version: 2.1.16
Precedence: list
List-Id: Greybus Development Mail List <greybus-dev.lists.linaro.org>
List-Unsubscribe: <https://lists.linaro.org/mailman/options/greybus-dev>,
 <mailto:greybus-dev-request@lists.linaro.org?subject=unsubscribe>
List-Archive: <http://lists.linaro.org/pipermail/greybus-dev/>
List-Post: <mailto:greybus-dev@lists.linaro.org>
List-Help: <mailto:greybus-dev-request@lists.linaro.org?subject=help>
List-Subscribe: <https://lists.linaro.org/mailman/listinfo/greybus-dev>,
 <mailto:greybus-dev-request@lists.linaro.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: greybus-dev-bounces@lists.linaro.org
Sender: "greybus-dev" <greybus-dev-bounces@lists.linaro.org>
X-Virus-Scanned: ClamAV using ClamSMTP

R3JleWJ1cyBDb2RlYyBkcml2ZXIgYWxsb3dzIG1vZHVsZXMgdG8gYmUgZHluYW1pY2FsbHkgYWRk
ZWQgYW5kIHJlbW92ZWQsCndoaWNoIGZ1cnRoZXIgcmVxdWlyZXMgdXBkYXRpbmcgdGhlIERBUE0g
Y29uZmlndXJhdGlvbnMgYXMgd2VsbC4KCldpdGggY3VycmVudCBzbmRfc29jIGFyY2hpdGVjdHVy
ZSwgZHluYW1pYyBhdWRpbyBtb2R1bGVzIGlzIG5vdCB5ZXQKc3VwcG9ydGVkLiBUaGlzIHBhdGNo
IHByb3ZpZGVzIGhlbHBlciBBUElzIHRvIHVwZGF0ZSBEQVBNIGNvbmZpZ3VyYXRpb25zCmluIHJl
c3BvbnNlIHRvIG1vZHVsZXMgd2hpY2ggYXJlIGR5bmFtaWNhbGx5IGFkZGVkIG9yIHJlbW92ZWQu
IFRoZQpzb3VyY2UgaXMgcHJpbWFyaWx5IGJhc2VkIG9uIHNuZF9kYXBtLmMKClNpZ25lZC1vZmYt
Ynk6IFZhaWJoYXYgQWdhcndhbCA8dmFpYmhhdi5zckBnbWFpbC5jb20+ClJldmlld2VkLWJ5OiBE
YW4gQ2FycGVudGVyIDxkYW4uY2FycGVudGVyQG9yYWNsZS5jb20+Ci0tLQogZHJpdmVycy9zdGFn
aW5nL2dyZXlidXMvTWFrZWZpbGUgICAgICAgfCAgIDIgKy0KIGRyaXZlcnMvc3RhZ2luZy9ncmV5
YnVzL2F1ZGlvX2NvZGVjLmMgIHwgIDEyICstCiBkcml2ZXJzL3N0YWdpbmcvZ3JleWJ1cy9hdWRp
b19oZWxwZXIuYyB8IDE5NyArKysrKysrKysrKysrKysrKysrKysrKysrCiBkcml2ZXJzL3N0YWdp
bmcvZ3JleWJ1cy9hdWRpb19oZWxwZXIuaCB8ICAxNyArKysKIDQgZmlsZXMgY2hhbmdlZCwgMjIz
IGluc2VydGlvbnMoKyksIDUgZGVsZXRpb25zKC0pCiBjcmVhdGUgbW9kZSAxMDA2NDQgZHJpdmVy
cy9zdGFnaW5nL2dyZXlidXMvYXVkaW9faGVscGVyLmMKIGNyZWF0ZSBtb2RlIDEwMDY0NCBkcml2
ZXJzL3N0YWdpbmcvZ3JleWJ1cy9hdWRpb19oZWxwZXIuaAoKZGlmZiAtLWdpdCBhL2RyaXZlcnMv
c3RhZ2luZy9ncmV5YnVzL01ha2VmaWxlIGIvZHJpdmVycy9zdGFnaW5nL2dyZXlidXMvTWFrZWZp
bGUKaW5kZXggNjI3ZTQ0ZjJhOTgzLi4zYjRiNmNhYmZmMTkgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMv
c3RhZ2luZy9ncmV5YnVzL01ha2VmaWxlCisrKyBiL2RyaXZlcnMvc3RhZ2luZy9ncmV5YnVzL01h
a2VmaWxlCkBAIC0yOCw3ICsyOCw3IEBAIG9iai0kKENPTkZJR19HUkVZQlVTX1ZJQlJBVE9SKQkr
PSBnYi12aWJyYXRvci5vCiAKICMgR3JleWJ1cyBBdWRpbyBpcyBhIGJ1bmNoIG9mIG1vZHVsZXMK
IGdiLWF1ZGlvLW1vZHVsZS15CTo9IGF1ZGlvX21vZHVsZS5vIGF1ZGlvX3RvcG9sb2d5Lm8KLWdi
LWF1ZGlvLWNvZGVjLXkJOj0gYXVkaW9fY29kZWMubworZ2ItYXVkaW8tY29kZWMteQk6PSBhdWRp
b19jb2RlYy5vIGF1ZGlvX2hlbHBlci5vCiBnYi1hdWRpby1nYi15CQk6PSBhdWRpb19nYi5vCiBn
Yi1hdWRpby1hcGJyaWRnZWEteQk6PSBhdWRpb19hcGJyaWRnZWEubwogZ2ItYXVkaW8tbWFuYWdl
ci15CTo9IGF1ZGlvX21hbmFnZXIubyBhdWRpb19tYW5hZ2VyX21vZHVsZS5vCmRpZmYgLS1naXQg
YS9kcml2ZXJzL3N0YWdpbmcvZ3JleWJ1cy9hdWRpb19jb2RlYy5jIGIvZHJpdmVycy9zdGFnaW5n
L2dyZXlidXMvYXVkaW9fY29kZWMuYwppbmRleCAwZWNkYmEyNzA4NmIuLjc0NTM4ZjhjNWZhNCAx
MDA2NDQKLS0tIGEvZHJpdmVycy9zdGFnaW5nL2dyZXlidXMvYXVkaW9fY29kZWMuYworKysgYi9k
cml2ZXJzL3N0YWdpbmcvZ3JleWJ1cy9hdWRpb19jb2RlYy5jCkBAIC0xNCw2ICsxNCw3IEBACiAj
aW5jbHVkZSAiYXVkaW9fY29kZWMuaCIKICNpbmNsdWRlICJhdWRpb19hcGJyaWRnZWEuaCIKICNp
bmNsdWRlICJhdWRpb19tYW5hZ2VyLmgiCisjaW5jbHVkZSAiYXVkaW9faGVscGVyLmgiCiAKIHN0
YXRpYyBzdHJ1Y3QgZ2JhdWRpb19jb2RlY19pbmZvICpnYmNvZGVjOwogCkBAIC04NjUsNyArODY2
LDcgQEAgaW50IGdiYXVkaW9fcmVnaXN0ZXJfbW9kdWxlKHN0cnVjdCBnYmF1ZGlvX21vZHVsZV9p
bmZvICptb2R1bGUpCiAKIAkvKiBjYXJkIGFscmVhZHkgaW5zdGFudGlhdGVkLCBjcmVhdGUgd2lk
Z2V0cyBoZXJlIG9ubHkgKi8KIAlpZiAoY29tcC0+Y2FyZC0+aW5zdGFudGlhdGVkKSB7Ci0JCXNu
ZF9zb2NfZGFwbV9saW5rX2NvbXBvbmVudF9kYWlfd2lkZ2V0cyhjb21wLT5jYXJkLAorCQlnYmF1
ZGlvX2RhcG1fbGlua19jb21wb25lbnRfZGFpX3dpZGdldHMoY29tcC0+Y2FyZCwKIAkJCQkJCQkm
Y29tcC0+ZGFwbSk7CiAjaWZkZWYgQ09ORklHX1NORF9KQUNLCiAJCS8qCkBAIC05OTksMTMgKzEw
MDAsMTYgQEAgdm9pZCBnYmF1ZGlvX3VucmVnaXN0ZXJfbW9kdWxlKHN0cnVjdCBnYmF1ZGlvX21v
ZHVsZV9pbmZvICptb2R1bGUpCiAJaWYgKG1vZHVsZS0+Y29udHJvbHMpIHsKIAkJZGV2X2RiZyhj
b21wLT5kZXYsICJSZW1vdmluZyAlZCBjb250cm9sc1xuIiwKIAkJCW1vZHVsZS0+bnVtX2NvbnRy
b2xzKTsKLQkJc25kX3NvY19yZW1vdmVfY29kZWNfY29udHJvbHMoY29tcCwgbW9kdWxlLT5jb250
cm9scywKLQkJCQkJICAgICAgbW9kdWxlLT5udW1fY29udHJvbHMpOworCQkvKiByZWxlYXNlIGNv
bnRyb2wgc2VtYXBob3JlICovCisJCXVwX3dyaXRlKCZjYXJkLT5jb250cm9sc19yd3NlbSk7CisJ
CWdiYXVkaW9fcmVtb3ZlX2NvbXBvbmVudF9jb250cm9scyhjb21wLCBtb2R1bGUtPmNvbnRyb2xz
LAorCQkJCQkJICBtb2R1bGUtPm51bV9jb250cm9scyk7CisJCWRvd25fd3JpdGUoJmNhcmQtPmNv
bnRyb2xzX3J3c2VtKTsKIAl9CiAJaWYgKG1vZHVsZS0+ZGFwbV93aWRnZXRzKSB7CiAJCWRldl9k
YmcoY29tcC0+ZGV2LCAiUmVtb3ZpbmcgJWQgd2lkZ2V0c1xuIiwKIAkJCW1vZHVsZS0+bnVtX2Rh
cG1fd2lkZ2V0cyk7Ci0JCXNuZF9zb2NfZGFwbV9mcmVlX2NvbnRyb2xzKCZjb21wLT5kYXBtLCBt
b2R1bGUtPmRhcG1fd2lkZ2V0cywKKwkJZ2JhdWRpb19kYXBtX2ZyZWVfY29udHJvbHMoJmNvbXAt
PmRhcG0sIG1vZHVsZS0+ZGFwbV93aWRnZXRzLAogCQkJCQkgICBtb2R1bGUtPm51bV9kYXBtX3dp
ZGdldHMpOwogCX0KIApkaWZmIC0tZ2l0IGEvZHJpdmVycy9zdGFnaW5nL2dyZXlidXMvYXVkaW9f
aGVscGVyLmMgYi9kcml2ZXJzL3N0YWdpbmcvZ3JleWJ1cy9hdWRpb19oZWxwZXIuYwpuZXcgZmls
ZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwMDAwMDAuLmZhYWEzOTcwODExOAotLS0gL2Rldi9u
dWxsCisrKyBiL2RyaXZlcnMvc3RhZ2luZy9ncmV5YnVzL2F1ZGlvX2hlbHBlci5jCkBAIC0wLDAg
KzEsMTk3IEBACisvLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogR1BMLTIuMAorLyoKKyAqIEdy
ZXlidXMgQXVkaW8gU291bmQgU29DIGhlbHBlciBBUElzCisgKi8KKworI2luY2x1ZGUgPGxpbnV4
L2RlYnVnZnMuaD4KKyNpbmNsdWRlIDxzb3VuZC9jb3JlLmg+CisjaW5jbHVkZSA8c291bmQvc29j
Lmg+CisjaW5jbHVkZSA8c291bmQvc29jLWRhcG0uaD4KKworI2RlZmluZSBnYmF1ZGlvX2RhcG1f
Zm9yX2VhY2hfZGlyZWN0aW9uKGRpcikgXAorCWZvciAoKGRpcikgPSBTTkRfU09DX0RBUE1fRElS
X0lOOyAoZGlyKSA8PSBTTkRfU09DX0RBUE1fRElSX09VVDsgXAorCQkoZGlyKSsrKQorCitzdGF0
aWMgdm9pZCBnYmF1ZGlvX2RhcG1fbGlua19kYWlfd2lkZ2V0KHN0cnVjdCBzbmRfc29jX2RhcG1f
d2lkZ2V0ICpkYWlfdywKKwkJCQkJIHN0cnVjdCBzbmRfc29jX2NhcmQgKmNhcmQpCit7CisJc3Ry
dWN0IHNuZF9zb2NfZGFwbV93aWRnZXQgKnc7CisJc3RydWN0IHNuZF9zb2NfZGFwbV93aWRnZXQg
KnNyYywgKnNpbms7CisJc3RydWN0IHNuZF9zb2NfZGFpICpkYWkgPSBkYWlfdy0+cHJpdjsKKwor
CS8qIC4uLmZpbmQgYWxsIHdpZGdldHMgd2l0aCB0aGUgc2FtZSBzdHJlYW0gYW5kIGxpbmsgdGhl
bSAqLworCWxpc3RfZm9yX2VhY2hfZW50cnkodywgJmNhcmQtPndpZGdldHMsIGxpc3QpIHsKKwkJ
aWYgKHctPmRhcG0gIT0gZGFpX3ctPmRhcG0pCisJCQljb250aW51ZTsKKworCQlzd2l0Y2ggKHct
PmlkKSB7CisJCWNhc2Ugc25kX3NvY19kYXBtX2RhaV9pbjoKKwkJY2FzZSBzbmRfc29jX2RhcG1f
ZGFpX291dDoKKwkJCWNvbnRpbnVlOworCQlkZWZhdWx0OgorCQkJYnJlYWs7CisJCX0KKworCQlp
ZiAoIXctPnNuYW1lIHx8ICFzdHJzdHIody0+c25hbWUsIGRhaV93LT5zbmFtZSkpCisJCQljb250
aW51ZTsKKworCQkvKgorCQkgKiBjaGVjayBpZiB3aWRnZXQgaXMgYWxyZWFkeSBsaW5rZWQsCisJ
CSAqIGlmICh3LT5saW5rZWQpCisJCSAqCXJldHVybjsKKwkJICovCisKKwkJaWYgKGRhaV93LT5p
ZCA9PSBzbmRfc29jX2RhcG1fZGFpX2luKSB7CisJCQlzcmMgPSBkYWlfdzsKKwkJCXNpbmsgPSB3
OworCQl9IGVsc2UgeworCQkJc3JjID0gdzsKKwkJCXNpbmsgPSBkYWlfdzsKKwkJfQorCQlkZXZf
ZGJnKGRhaS0+ZGV2LCAiJXMgLT4gJXNcbiIsIHNyYy0+bmFtZSwgc2luay0+bmFtZSk7CisJCS8q
IEFkZCB0aGUgREFQTSBwYXRoIGFuZCBzZXQgd2lkZ2V0J3MgbGlua2VkIHN0YXR1cworCQkgKiBz
bmRfc29jX2RhcG1fYWRkX3BhdGgody0+ZGFwbSwgc3JjLCBzaW5rLCBOVUxMLCBOVUxMKTsKKwkJ
ICogdy0+bGlua2VkID0gMTsKKwkJICovCisJfQorfQorCitpbnQgZ2JhdWRpb19kYXBtX2xpbmtf
Y29tcG9uZW50X2RhaV93aWRnZXRzKHN0cnVjdCBzbmRfc29jX2NhcmQgKmNhcmQsCisJCQkJCSAg
ICBzdHJ1Y3Qgc25kX3NvY19kYXBtX2NvbnRleHQgKmRhcG0pCit7CisJc3RydWN0IHNuZF9zb2Nf
ZGFwbV93aWRnZXQgKmRhaV93OworCisJLyogRm9yIGVhY2ggREFJIHdpZGdldC4uLiAqLworCWxp
c3RfZm9yX2VhY2hfZW50cnkoZGFpX3csICZjYXJkLT53aWRnZXRzLCBsaXN0KSB7CisJCWlmIChk
YWlfdy0+ZGFwbSAhPSBkYXBtKQorCQkJY29udGludWU7CisJCXN3aXRjaCAoZGFpX3ctPmlkKSB7
CisJCWNhc2Ugc25kX3NvY19kYXBtX2RhaV9pbjoKKwkJY2FzZSBzbmRfc29jX2RhcG1fZGFpX291
dDoKKwkJCWJyZWFrOworCQlkZWZhdWx0OgorCQkJY29udGludWU7CisJCX0KKwkJZ2JhdWRpb19k
YXBtX2xpbmtfZGFpX3dpZGdldChkYWlfdywgY2FyZCk7CisJfQorCisJcmV0dXJuIDA7Cit9CisK
K3N0YXRpYyB2b2lkIGdiYXVkaW9fZGFwbV9mcmVlX3BhdGgoc3RydWN0IHNuZF9zb2NfZGFwbV9w
YXRoICpwYXRoKQoreworCWxpc3RfZGVsKCZwYXRoLT5saXN0X25vZGVbU05EX1NPQ19EQVBNX0RJ
Ul9JTl0pOworCWxpc3RfZGVsKCZwYXRoLT5saXN0X25vZGVbU05EX1NPQ19EQVBNX0RJUl9PVVRd
KTsKKwlsaXN0X2RlbCgmcGF0aC0+bGlzdF9rY29udHJvbCk7CisJbGlzdF9kZWwoJnBhdGgtPmxp
c3QpOworCWtmcmVlKHBhdGgpOworfQorCitzdGF0aWMgdm9pZCBnYmF1ZGlvX2RhcG1fZnJlZV93
aWRnZXQoc3RydWN0IHNuZF9zb2NfZGFwbV93aWRnZXQgKncpCit7CisJc3RydWN0IHNuZF9zb2Nf
ZGFwbV9wYXRoICpwLCAqbmV4dF9wOworCWVudW0gc25kX3NvY19kYXBtX2RpcmVjdGlvbiBkaXI7
CisKKwlsaXN0X2RlbCgmdy0+bGlzdCk7CisJLyoKKwkgKiByZW1vdmUgc291cmNlIGFuZCBzaW5r
IHBhdGhzIGFzc29jaWF0ZWQgdG8gdGhpcyB3aWRnZXQuCisJICogV2hpbGUgcmVtb3ZpbmcgdGhl
IHBhdGgsIHJlbW92ZSByZWZlcmVuY2UgdG8gaXQgZnJvbSBib3RoCisJICogc291cmNlIGFuZCBz
aW5rIHdpZGdldHMgc28gdGhhdCBwYXRoIGlzIHJlbW92ZWQgb25seSBvbmNlLgorCSAqLworCWdi
YXVkaW9fZGFwbV9mb3JfZWFjaF9kaXJlY3Rpb24oZGlyKSB7CisJCXNuZF9zb2NfZGFwbV93aWRn
ZXRfZm9yX2VhY2hfcGF0aF9zYWZlKHcsIGRpciwgcCwgbmV4dF9wKQorCQkJZ2JhdWRpb19kYXBt
X2ZyZWVfcGF0aChwKTsKKwl9CisKKwlrZnJlZSh3LT5rY29udHJvbHMpOworCWtmcmVlX2NvbnN0
KHctPm5hbWUpOworCWtmcmVlX2NvbnN0KHctPnNuYW1lKTsKKwlrZnJlZSh3KTsKK30KKworaW50
IGdiYXVkaW9fZGFwbV9mcmVlX2NvbnRyb2xzKHN0cnVjdCBzbmRfc29jX2RhcG1fY29udGV4dCAq
ZGFwbSwKKwkJCSAgICAgICBjb25zdCBzdHJ1Y3Qgc25kX3NvY19kYXBtX3dpZGdldCAqd2lkZ2V0
LAorCQkJICAgICAgIGludCBudW0pCit7CisJaW50IGk7CisJc3RydWN0IHNuZF9zb2NfZGFwbV93
aWRnZXQgKncsICpuZXh0X3c7CisjaWZkZWYgQ09ORklHX0RFQlVHX0ZTCisJc3RydWN0IGRlbnRy
eSAqcGFyZW50ID0gZGFwbS0+ZGVidWdmc19kYXBtOworCXN0cnVjdCBkZW50cnkgKmRlYnVnZnNf
dyA9IE5VTEw7CisjZW5kaWYKKworCW11dGV4X2xvY2soJmRhcG0tPmNhcmQtPmRhcG1fbXV0ZXgp
OworCWZvciAoaSA9IDA7IGkgPCBudW07IGkrKykgeworCQkvKiBiZWxvdyBsb2dpYyBjYW4gYmUg
b3B0aW1pemVkIHRvIGlkZW50aWZ5IHdpZGdldCBwb2ludGVyICovCisJCWxpc3RfZm9yX2VhY2hf
ZW50cnlfc2FmZSh3LCBuZXh0X3csICZkYXBtLT5jYXJkLT53aWRnZXRzLAorCQkJCQkgbGlzdCkg
eworCQkJaWYgKHctPmRhcG0gIT0gZGFwbSkKKwkJCQljb250aW51ZTsKKwkJCWlmICghc3RyY21w
KHctPm5hbWUsIHdpZGdldC0+bmFtZSkpCisJCQkJYnJlYWs7CisJCQl3ID0gTlVMTDsKKwkJfQor
CQlpZiAoIXcpIHsKKwkJCWRldl9lcnIoZGFwbS0+ZGV2LCAiJXM6IHdpZGdldCBub3QgZm91bmRc
biIsCisJCQkJd2lkZ2V0LT5uYW1lKTsKKwkJCXJldHVybiAtRUlOVkFMOworCQl9CisJCXdpZGdl
dCsrOworI2lmZGVmIENPTkZJR19ERUJVR19GUworCQlpZiAoIXBhcmVudCkKKwkJCWRlYnVnZnNf
dyA9IGRlYnVnZnNfbG9va3VwKHctPm5hbWUsIHBhcmVudCk7CisJCWRlYnVnZnNfcmVtb3ZlKGRl
YnVnZnNfdyk7CisJCWRlYnVnZnNfdyA9IE5VTEw7CisjZW5kaWYKKwkJZ2JhdWRpb19kYXBtX2Zy
ZWVfd2lkZ2V0KHcpOworCX0KKwltdXRleF91bmxvY2soJmRhcG0tPmNhcmQtPmRhcG1fbXV0ZXgp
OworCXJldHVybiAwOworfQorCitzdGF0aWMgaW50IGdiYXVkaW9fcmVtb3ZlX2NvbnRyb2xzKHN0
cnVjdCBzbmRfY2FyZCAqY2FyZCwgc3RydWN0IGRldmljZSAqZGV2LAorCQkJCSAgIGNvbnN0IHN0
cnVjdCBzbmRfa2NvbnRyb2xfbmV3ICpjb250cm9scywKKwkJCQkgICBpbnQgbnVtX2NvbnRyb2xz
LCBjb25zdCBjaGFyICpwcmVmaXgpCit7CisJaW50IGksIGVycjsKKworCWZvciAoaSA9IDA7IGkg
PCBudW1fY29udHJvbHM7IGkrKykgeworCQljb25zdCBzdHJ1Y3Qgc25kX2tjb250cm9sX25ldyAq
Y29udHJvbCA9ICZjb250cm9sc1tpXTsKKwkJc3RydWN0IHNuZF9jdGxfZWxlbV9pZCBpZDsKKwkJ
c3RydWN0IHNuZF9rY29udHJvbCAqa2N0bDsKKworCQlpZiAocHJlZml4KQorCQkJc25wcmludGYo
aWQubmFtZSwgc2l6ZW9mKGlkLm5hbWUpLCAiJXMgJXMiLCBwcmVmaXgsCisJCQkJIGNvbnRyb2wt
Pm5hbWUpOworCQllbHNlCisJCQlzdHJsY3B5KGlkLm5hbWUsIGNvbnRyb2wtPm5hbWUsIHNpemVv
ZihpZC5uYW1lKSk7CisJCWlkLm51bWlkID0gMDsKKwkJaWQuaWZhY2UgPSBjb250cm9sLT5pZmFj
ZTsKKwkJaWQuZGV2aWNlID0gY29udHJvbC0+ZGV2aWNlOworCQlpZC5zdWJkZXZpY2UgPSBjb250
cm9sLT5zdWJkZXZpY2U7CisJCWlkLmluZGV4ID0gY29udHJvbC0+aW5kZXg7CisJCWtjdGwgPSBz
bmRfY3RsX2ZpbmRfaWQoY2FyZCwgJmlkKTsKKwkJaWYgKCFrY3RsKSB7CisJCQlkZXZfZXJyKGRl
diwgIiVkOiBGYWlsZWQgdG8gZmluZCAlc1xuIiwgZXJyLAorCQkJCWNvbnRyb2wtPm5hbWUpOwor
CQkJY29udGludWU7CisJCX0KKwkJZXJyID0gc25kX2N0bF9yZW1vdmUoY2FyZCwga2N0bCk7CisJ
CWlmIChlcnIgPCAwKSB7CisJCQlkZXZfZXJyKGRldiwgIiVkOiBGYWlsZWQgdG8gcmVtb3ZlICVz
XG4iLCBlcnIsCisJCQkJY29udHJvbC0+bmFtZSk7CisJCQljb250aW51ZTsKKwkJfQorCX0KKwly
ZXR1cm4gMDsKK30KKworaW50IGdiYXVkaW9fcmVtb3ZlX2NvbXBvbmVudF9jb250cm9scyhzdHJ1
Y3Qgc25kX3NvY19jb21wb25lbnQgKmNvbXBvbmVudCwKKwkJCQkgICAgICBjb25zdCBzdHJ1Y3Qg
c25kX2tjb250cm9sX25ldyAqY29udHJvbHMsCisJCQkJICAgICAgdW5zaWduZWQgaW50IG51bV9j
b250cm9scykKK3sKKwlzdHJ1Y3Qgc25kX2NhcmQgKmNhcmQgPSBjb21wb25lbnQtPmNhcmQtPnNu
ZF9jYXJkOworCisJcmV0dXJuIGdiYXVkaW9fcmVtb3ZlX2NvbnRyb2xzKGNhcmQsIGNvbXBvbmVu
dC0+ZGV2LCBjb250cm9scywKKwkJCQkgICAgICAgbnVtX2NvbnRyb2xzLCBjb21wb25lbnQtPm5h
bWVfcHJlZml4KTsKK30KZGlmZiAtLWdpdCBhL2RyaXZlcnMvc3RhZ2luZy9ncmV5YnVzL2F1ZGlv
X2hlbHBlci5oIGIvZHJpdmVycy9zdGFnaW5nL2dyZXlidXMvYXVkaW9faGVscGVyLmgKbmV3IGZp
bGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMDAwMDAwLi41Y2YxYzZkN2QzZWEKLS0tIC9kZXYv
bnVsbAorKysgYi9kcml2ZXJzL3N0YWdpbmcvZ3JleWJ1cy9hdWRpb19oZWxwZXIuaApAQCAtMCww
ICsxLDE3IEBACisvKiBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogR1BMLTIuMCAqLworLyoKKyAq
IEdyZXlidXMgQXVkaW8gU291bmQgU29DIGhlbHBlciBBUElzCisgKi8KKworI2lmbmRlZiBfX0xJ
TlVYX0dCQVVESU9fSEVMUEVSX0gKKyNkZWZpbmUgX19MSU5VWF9HQkFVRElPX0hFTFBFUl9ICisK
K2ludCBnYmF1ZGlvX2RhcG1fbGlua19jb21wb25lbnRfZGFpX3dpZGdldHMoc3RydWN0IHNuZF9z
b2NfY2FyZCAqY2FyZCwKKwkJCQkJICAgIHN0cnVjdCBzbmRfc29jX2RhcG1fY29udGV4dCAqZGFw
bSk7CitpbnQgZ2JhdWRpb19kYXBtX2ZyZWVfY29udHJvbHMoc3RydWN0IHNuZF9zb2NfZGFwbV9j
b250ZXh0ICpkYXBtLAorCQkJICAgICAgIGNvbnN0IHN0cnVjdCBzbmRfc29jX2RhcG1fd2lkZ2V0
ICp3aWRnZXQsCisJCQkgICAgICAgaW50IG51bSk7CitpbnQgZ2JhdWRpb19yZW1vdmVfY29tcG9u
ZW50X2NvbnRyb2xzKHN0cnVjdCBzbmRfc29jX2NvbXBvbmVudCAqY29tcG9uZW50LAorCQkJCSAg
ICAgIGNvbnN0IHN0cnVjdCBzbmRfa2NvbnRyb2xfbmV3ICpjb250cm9scywKKwkJCQkgICAgICB1
bnNpZ25lZCBpbnQgbnVtX2NvbnRyb2xzKTsKKyNlbmRpZgotLSAKMi4yNy4wCgpfX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpncmV5YnVzLWRldiBtYWlsaW5n
IGxpc3QKZ3JleWJ1cy1kZXZAbGlzdHMubGluYXJvLm9yZwpodHRwczovL2xpc3RzLmxpbmFyby5v
cmcvbWFpbG1hbi9saXN0aW5mby9ncmV5YnVzLWRldgo=
