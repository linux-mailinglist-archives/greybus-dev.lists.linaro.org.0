Return-Path: <greybus-dev-bounces@lists.linaro.org>
X-Original-To: lists+greybus-dev@lfdr.de
Delivered-To: lists+greybus-dev@lfdr.de
Received: from lists.linaro.org (lists.linaro.org [107.22.173.205])
	by mail.lfdr.de (Postfix) with ESMTPS id A76901F5A82
	for <lists+greybus-dev@lfdr.de>; Wed, 10 Jun 2020 19:31:15 +0200 (CEST)
Received: from lists.linaro.org (localhost [127.0.0.1])
	by lists.linaro.org (Postfix) with ESMTP id 532AC664F0
	for <lists+greybus-dev@lfdr.de>; Wed, 10 Jun 2020 17:31:14 +0000 (UTC)
Received: by lists.linaro.org (Postfix, from userid 109)
	id 45F7C664F5; Wed, 10 Jun 2020 17:31:14 +0000 (UTC)
X-Spam-Checker-Version: SpamAssassin 3.4.2 (2018-09-13) on lists.linaro.org
X-Spam-Level: 
X-Spam-Status: No, score=-2.9 required=5.0 tests=BAYES_00,DKIM_ADSP_CUSTOM_MED,
	FREEMAIL_FROM,MAILING_LIST_MULTI,RCVD_IN_DNSWL_NONE,RCVD_IN_MSPIKE_H3,
	RCVD_IN_MSPIKE_WL,SPF_HELO_NONE autolearn=disabled version=3.4.2
Received: from lists.linaro.org (localhost [127.0.0.1])
	by lists.linaro.org (Postfix) with ESMTP id 0FC9F6198E;
	Wed, 10 Jun 2020 17:30:26 +0000 (UTC)
X-Original-To: greybus-dev@lists.linaro.org
Delivered-To: greybus-dev@lists.linaro.org
Received: from lists.linaro.org (localhost [127.0.0.1])
 by lists.linaro.org (Postfix) with ESMTP id F24DC6192B
 for <greybus-dev@lists.linaro.org>; Wed, 10 Jun 2020 17:30:17 +0000 (UTC)
Received: by lists.linaro.org (Postfix, from userid 109)
 id E579261963; Wed, 10 Jun 2020 17:30:17 +0000 (UTC)
Received: from mail-pg1-f193.google.com (mail-pg1-f193.google.com
 [209.85.215.193])
 by lists.linaro.org (Postfix) with ESMTPS id F3DEB6198E
 for <greybus-dev@lists.linaro.org>; Wed, 10 Jun 2020 17:29:48 +0000 (UTC)
Received: by mail-pg1-f193.google.com with SMTP id m1so1283544pgk.1
 for <greybus-dev@lists.linaro.org>; Wed, 10 Jun 2020 10:29:48 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=eAr7BDOYafLwm499jGVZgpRr2Ip7dS5Qc3BmlInF6Us=;
 b=Cyg+anOn08kUpNvVkGIOgahQpv9a7IOjpM8SVbFyeRfeb8gfruemJViFvnYxNmAPir
 Hbn/pKG29DR+LpKhibT1yIXpX9qAjGqer6gA7bokUjfz7DU+jSJyOKqagKY6H/nikmRj
 8VYCoqZoMC8BZl50wU4BUYaY90mc2njnr1KVzlpnSN1QRUvA40dYKWnIbzH7IY/+aD/Y
 n2w/BPkl8Mg9D+V/9aDtzik9Hw+JxAmOGkG4d5ws3YUhFO8Sl8fofkqppANDm8emmAwD
 OM2d+EeUF9Rq9kzleNBNZXkyJPgo21/83qGDAzfKXnDyJ5vZ2XKiRkVr4e81nfoLP/sv
 k/2g==
X-Gm-Message-State: AOAM531bMHZndNrRvfUel6/KfBTBp6Zpt879z1rUhQri/ee4WmL/qI4P
 a/mu33NFfdqnC7OIeOwKATE=
X-Google-Smtp-Source: ABdhPJzt5aWxNFOCdd4o+EnzBlPBh7kxl3nQOWyIfOzIK69DPnuBjMBG+PUyCxRsOS6VoIDJEDw2SA==
X-Received: by 2002:a62:76d5:: with SMTP id r204mr3717131pfc.46.1591810187994; 
 Wed, 10 Jun 2020 10:29:47 -0700 (PDT)
Received: from cvds-vagarw7.iind.intel.com ([192.55.54.40])
 by smtp.googlemail.com with ESMTPSA id l83sm490470pfd.150.2020.06.10.10.29.37
 (version=TLS1_2 cipher=ECDHE-ECDSA-AES128-GCM-SHA256 bits=128/128);
 Wed, 10 Jun 2020 10:29:47 -0700 (PDT)
From: Vaibhav Agarwal <vaibhav.sr@gmail.com>
To: Greg Kroah-Hartman <gregkh@linuxfoundation.org>,
 Alex Elder <elder@kernel.org>, Johan Hovold <johan@kernel.org>,
 Mark Greer <mgreer@animalcreek.com>, Takashi Iwai <tiwai@suse.com>,
 Jaroslav Kysela <perex@perex.cz>, Mark Brown <broonie@kernel.org>,
 Liam Girdwood <lgirdwood@gmail.com>
Date: Wed, 10 Jun 2020 22:58:28 +0530
Message-Id: <7cbb81585474e895faa842e2af05ec3fb2079386.1591802243.git.vaibhav.sr@gmail.com>
X-Mailer: git-send-email 2.26.2
In-Reply-To: <cover.1591802243.git.vaibhav.sr@gmail.com>
References: <cover.1591802243.git.vaibhav.sr@gmail.com>
MIME-Version: 1.0
X-Virus-Scanned: ClamAV using ClamSMTP
Cc: devel@driverdev.osuosl.org, alsa-devel@alsa-project.org,
 Alexandre Belloni <alexandre.belloni@bootlin.com>,
 linux-kernel@vger.kernel.org, greybus-dev@lists.linaro.org
Subject: [greybus-dev] [PATCH v2 4/6] staging: greybus: audio: Resolve
	compilation error in topology parser
X-BeenThere: greybus-dev@lists.linaro.org
X-Mailman-Version: 2.1.16
Precedence: list
List-Id: Greybus Development Mail List <greybus-dev.lists.linaro.org>
List-Unsubscribe: <https://lists.linaro.org/mailman/options/greybus-dev>,
 <mailto:greybus-dev-request@lists.linaro.org?subject=unsubscribe>
List-Archive: <http://lists.linaro.org/pipermail/greybus-dev/>
List-Post: <mailto:greybus-dev@lists.linaro.org>
List-Help: <mailto:greybus-dev-request@lists.linaro.org?subject=help>
List-Subscribe: <https://lists.linaro.org/mailman/listinfo/greybus-dev>,
 <mailto:greybus-dev-request@lists.linaro.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: greybus-dev-bounces@lists.linaro.org
Sender: "greybus-dev" <greybus-dev-bounces@lists.linaro.org>
X-Virus-Scanned: ClamAV using ClamSMTP

Rml4IGNvbXBpbGF0aW9uIGVycm9ycyBmb3IgR0IgQXVkaW8gdG9wb2xvZ3kgcGFyc2VyIGNvZGUg
d2l0aCByZWNlbnQKa2VybmVsIHZlcnNpb25zLgoKU2lnbmVkLW9mZi1ieTogVmFpYmhhdiBBZ2Fy
d2FsIDx2YWliaGF2LnNyQGdtYWlsLmNvbT4KLS0tCiBkcml2ZXJzL3N0YWdpbmcvZ3JleWJ1cy9h
dWRpb190b3BvbG9neS5jIHwgMTI4ICsrKysrKysrKysrLS0tLS0tLS0tLS0tCiAxIGZpbGUgY2hh
bmdlZCwgNjAgaW5zZXJ0aW9ucygrKSwgNjggZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvZHJp
dmVycy9zdGFnaW5nL2dyZXlidXMvYXVkaW9fdG9wb2xvZ3kuYyBiL2RyaXZlcnMvc3RhZ2luZy9n
cmV5YnVzL2F1ZGlvX3RvcG9sb2d5LmMKaW5kZXggNGFjMzBhY2NmMjI2Li4yNTczNzBkYzI5ZmEg
MTAwNjQ0Ci0tLSBhL2RyaXZlcnMvc3RhZ2luZy9ncmV5YnVzL2F1ZGlvX3RvcG9sb2d5LmMKKysr
IGIvZHJpdmVycy9zdGFnaW5nL2dyZXlidXMvYXVkaW9fdG9wb2xvZ3kuYwpAQCAtNSw4ICs1LDgg
QEAKICAqIENvcHlyaWdodCAyMDE1LTIwMTYgTGluYXJvIEx0ZC4KICAqLwogCisjaW5jbHVkZSA8
bGludXgvZ3JleWJ1cy5oPgogI2luY2x1ZGUgImF1ZGlvX2NvZGVjLmgiCi0jaW5jbHVkZSAiZ3Jl
eWJ1c19wcm90b2NvbHMuaCIKIAogI2RlZmluZSBHQkFVRElPX0lOVkFMSURfSUQJMHhGRgogCkBA
IC0xNjUsMTUgKzE2NSwxNSBAQCBzdGF0aWMgaW50IGdiY29kZWNfbWl4ZXJfY3RsX2luZm8oc3Ry
dWN0IHNuZF9rY29udHJvbCAqa2NvbnRyb2wsCiAJc3RydWN0IGdiYXVkaW9fY3RsX3B2dCAqZGF0
YTsKIAlzdHJ1Y3QgZ2JfYXVkaW9fY3RsX2VsZW1faW5mbyAqaW5mbzsKIAlzdHJ1Y3QgZ2JhdWRp
b19tb2R1bGVfaW5mbyAqbW9kdWxlOwotCXN0cnVjdCBzbmRfc29jX2NvZGVjICpjb2RlYyA9IHNu
ZF9rY29udHJvbF9jaGlwKGtjb250cm9sKTsKLQlzdHJ1Y3QgZ2JhdWRpb19jb2RlY19pbmZvICpn
YmNvZGVjID0gc25kX3NvY19jb2RlY19nZXRfZHJ2ZGF0YShjb2RlYyk7CisJc3RydWN0IHNuZF9z
b2NfY29tcG9uZW50ICpjb21wID0gc25kX3NvY19rY29udHJvbF9jb21wb25lbnQoa2NvbnRyb2wp
OworCXN0cnVjdCBnYmF1ZGlvX2NvZGVjX2luZm8gKmdiY29kZWMgPSBzbmRfc29jX2NvbXBvbmVu
dF9nZXRfZHJ2ZGF0YShjb21wKTsKIAotCWRldl9kYmcoY29kZWMtPmRldiwgIkVudGVyZWQgJXM6
JXNcbiIsIF9fZnVuY19fLCBrY29udHJvbC0+aWQubmFtZSk7CisJZGV2X2RiZyhjb21wLT5kZXYs
ICJFbnRlcmVkICVzOiVzXG4iLCBfX2Z1bmNfXywga2NvbnRyb2wtPmlkLm5hbWUpOwogCWRhdGEg
PSAoc3RydWN0IGdiYXVkaW9fY3RsX3B2dCAqKWtjb250cm9sLT5wcml2YXRlX3ZhbHVlOwogCWlu
Zm8gPSAoc3RydWN0IGdiX2F1ZGlvX2N0bF9lbGVtX2luZm8gKilkYXRhLT5pbmZvOwogCiAJaWYg
KCFpbmZvKSB7Ci0JCWRldl9lcnIoY29kZWMtPmRldiwgIk5VTEwgaW5mbyBmb3IgJXNcbiIsIHVp
bmZvLT5pZC5uYW1lKTsKKwkJZGV2X2Vycihjb21wLT5kZXYsICJOVUxMIGluZm8gZm9yICVzXG4i
LCB1aW5mby0+aWQubmFtZSk7CiAJCXJldHVybiAtRUlOVkFMOwogCX0KIApAQCAtMjAxLDcgKzIw
MSw3IEBAIHN0YXRpYyBpbnQgZ2Jjb2RlY19taXhlcl9jdGxfaW5mbyhzdHJ1Y3Qgc25kX2tjb250
cm9sICprY29udHJvbCwKIAkJc3RybGNweSh1aW5mby0+dmFsdWUuZW51bWVyYXRlZC5uYW1lLCBu
YW1lLCBOQU1FX1NJWkUpOwogCQlicmVhazsKIAlkZWZhdWx0OgotCQlkZXZfZXJyKGNvZGVjLT5k
ZXYsICJJbnZhbGlkIHR5cGU6ICVkIGZvciAlczprY29udHJvbFxuIiwKKwkJZGV2X2Vycihjb21w
LT5kZXYsICJJbnZhbGlkIHR5cGU6ICVkIGZvciAlczprY29udHJvbFxuIiwKIAkJCWluZm8tPnR5
cGUsIGtjb250cm9sLT5pZC5uYW1lKTsKIAkJYnJlYWs7CiAJfQpAQCAtMjE2LDExICsyMTYsMTEg
QEAgc3RhdGljIGludCBnYmNvZGVjX21peGVyX2N0bF9nZXQoc3RydWN0IHNuZF9rY29udHJvbCAq
a2NvbnRyb2wsCiAJc3RydWN0IGdiYXVkaW9fY3RsX3B2dCAqZGF0YTsKIAlzdHJ1Y3QgZ2JfYXVk
aW9fY3RsX2VsZW1fdmFsdWUgZ2J2YWx1ZTsKIAlzdHJ1Y3QgZ2JhdWRpb19tb2R1bGVfaW5mbyAq
bW9kdWxlOwotCXN0cnVjdCBzbmRfc29jX2NvZGVjICpjb2RlYyA9IHNuZF9rY29udHJvbF9jaGlw
KGtjb250cm9sKTsKLQlzdHJ1Y3QgZ2JhdWRpb19jb2RlY19pbmZvICpnYiA9IHNuZF9zb2NfY29k
ZWNfZ2V0X2RydmRhdGEoY29kZWMpOworCXN0cnVjdCBzbmRfc29jX2NvbXBvbmVudCAqY29tcCA9
IHNuZF9zb2Nfa2NvbnRyb2xfY29tcG9uZW50KGtjb250cm9sKTsKKwlzdHJ1Y3QgZ2JhdWRpb19j
b2RlY19pbmZvICpnYiA9IHNuZF9zb2NfY29tcG9uZW50X2dldF9kcnZkYXRhKGNvbXApOwogCXN0
cnVjdCBnYl9idW5kbGUgKmJ1bmRsZTsKIAotCWRldl9kYmcoY29kZWMtPmRldiwgIkVudGVyZWQg
JXM6JXNcbiIsIF9fZnVuY19fLCBrY29udHJvbC0+aWQubmFtZSk7CisJZGV2X2RiZyhjb21wLT5k
ZXYsICJFbnRlcmVkICVzOiVzXG4iLCBfX2Z1bmNfXywga2NvbnRyb2wtPmlkLm5hbWUpOwogCW1v
ZHVsZSA9IGZpbmRfZ2JfbW9kdWxlKGdiLCBrY29udHJvbC0+aWQubmFtZSk7CiAJaWYgKCFtb2R1
bGUpCiAJCXJldHVybiAtRUlOVkFMOwpAQCAtMjM5LDcgKzIzOSw3IEBAIHN0YXRpYyBpbnQgZ2Jj
b2RlY19taXhlcl9jdGxfZ2V0KHN0cnVjdCBzbmRfa2NvbnRyb2wgKmtjb250cm9sLAogCWdiX3Bt
X3J1bnRpbWVfcHV0X2F1dG9zdXNwZW5kKGJ1bmRsZSk7CiAKIAlpZiAocmV0KSB7Ci0JCWRldl9l
cnJfcmF0ZWxpbWl0ZWQoY29kZWMtPmRldiwgIiVkOkVycm9yIGluICVzIGZvciAlc1xuIiwgcmV0
LAorCQlkZXZfZXJyX3JhdGVsaW1pdGVkKGNvbXAtPmRldiwgIiVkOkVycm9yIGluICVzIGZvciAl
c1xuIiwgcmV0LAogCQkJCSAgICBfX2Z1bmNfXywga2NvbnRyb2wtPmlkLm5hbWUpOwogCQlyZXR1
cm4gcmV0OwogCX0KQEAgLTI2Miw3ICsyNjIsNyBAQCBzdGF0aWMgaW50IGdiY29kZWNfbWl4ZXJf
Y3RsX2dldChzdHJ1Y3Qgc25kX2tjb250cm9sICprY29udHJvbCwKIAkJCQlsZTMyX3RvX2NwdShn
YnZhbHVlLnZhbHVlLmVudW1lcmF0ZWRfaXRlbVsxXSk7CiAJCWJyZWFrOwogCWRlZmF1bHQ6Ci0J
CWRldl9lcnIoY29kZWMtPmRldiwgIkludmFsaWQgdHlwZTogJWQgZm9yICVzOmtjb250cm9sXG4i
LAorCQlkZXZfZXJyKGNvbXAtPmRldiwgIkludmFsaWQgdHlwZTogJWQgZm9yICVzOmtjb250cm9s
XG4iLAogCQkJaW5mby0+dHlwZSwga2NvbnRyb2wtPmlkLm5hbWUpOwogCQlyZXQgPSAtRUlOVkFM
OwogCQlicmVhazsKQEAgLTI3OCwxMSArMjc4LDExIEBAIHN0YXRpYyBpbnQgZ2Jjb2RlY19taXhl
cl9jdGxfcHV0KHN0cnVjdCBzbmRfa2NvbnRyb2wgKmtjb250cm9sLAogCXN0cnVjdCBnYmF1ZGlv
X2N0bF9wdnQgKmRhdGE7CiAJc3RydWN0IGdiX2F1ZGlvX2N0bF9lbGVtX3ZhbHVlIGdidmFsdWU7
CiAJc3RydWN0IGdiYXVkaW9fbW9kdWxlX2luZm8gKm1vZHVsZTsKLQlzdHJ1Y3Qgc25kX3NvY19j
b2RlYyAqY29kZWMgPSBzbmRfa2NvbnRyb2xfY2hpcChrY29udHJvbCk7Ci0Jc3RydWN0IGdiYXVk
aW9fY29kZWNfaW5mbyAqZ2IgPSBzbmRfc29jX2NvZGVjX2dldF9kcnZkYXRhKGNvZGVjKTsKKwlz
dHJ1Y3Qgc25kX3NvY19jb21wb25lbnQgKmNvbXAgPSBzbmRfc29jX2tjb250cm9sX2NvbXBvbmVu
dChrY29udHJvbCk7CisJc3RydWN0IGdiYXVkaW9fY29kZWNfaW5mbyAqZ2IgPSBzbmRfc29jX2Nv
bXBvbmVudF9nZXRfZHJ2ZGF0YShjb21wKTsKIAlzdHJ1Y3QgZ2JfYnVuZGxlICpidW5kbGU7CiAK
LQlkZXZfZGJnKGNvZGVjLT5kZXYsICJFbnRlcmVkICVzOiVzXG4iLCBfX2Z1bmNfXywga2NvbnRy
b2wtPmlkLm5hbWUpOworCWRldl9kYmcoY29tcC0+ZGV2LCAiRW50ZXJlZCAlczolc1xuIiwgX19m
dW5jX18sIGtjb250cm9sLT5pZC5uYW1lKTsKIAltb2R1bGUgPSBmaW5kX2diX21vZHVsZShnYiwg
a2NvbnRyb2wtPmlkLm5hbWUpOwogCWlmICghbW9kdWxlKQogCQlyZXR1cm4gLUVJTlZBTDsKQEAg
LTMwOSw3ICszMDksNyBAQCBzdGF0aWMgaW50IGdiY29kZWNfbWl4ZXJfY3RsX3B1dChzdHJ1Y3Qg
c25kX2tjb250cm9sICprY29udHJvbCwKIAkJCQljcHVfdG9fbGUzMih1Y29udHJvbC0+dmFsdWUu
ZW51bWVyYXRlZC5pdGVtWzFdKTsKIAkJYnJlYWs7CiAJZGVmYXVsdDoKLQkJZGV2X2Vycihjb2Rl
Yy0+ZGV2LCAiSW52YWxpZCB0eXBlOiAlZCBmb3IgJXM6a2NvbnRyb2xcbiIsCisJCWRldl9lcnIo
Y29tcC0+ZGV2LCAiSW52YWxpZCB0eXBlOiAlZCBmb3IgJXM6a2NvbnRyb2xcbiIsCiAJCQlpbmZv
LT50eXBlLCBrY29udHJvbC0+aWQubmFtZSk7CiAJCXJldCA9IC1FSU5WQUw7CiAJCWJyZWFrOwpA
QCAtMzI4LDcgKzMyOCw3IEBAIHN0YXRpYyBpbnQgZ2Jjb2RlY19taXhlcl9jdGxfcHV0KHN0cnVj
dCBzbmRfa2NvbnRyb2wgKmtjb250cm9sLAogCWdiX3BtX3J1bnRpbWVfcHV0X2F1dG9zdXNwZW5k
KGJ1bmRsZSk7CiAKIAlpZiAocmV0KSB7Ci0JCWRldl9lcnJfcmF0ZWxpbWl0ZWQoY29kZWMtPmRl
diwgIiVkOkVycm9yIGluICVzIGZvciAlc1xuIiwgcmV0LAorCQlkZXZfZXJyX3JhdGVsaW1pdGVk
KGNvbXAtPmRldiwgIiVkOkVycm9yIGluICVzIGZvciAlc1xuIiwgcmV0LAogCQkJCSAgICBfX2Z1
bmNfXywga2NvbnRyb2wtPmlkLm5hbWUpOwogCX0KIApAQCAtMzUyLDExICszNTIsNyBAQCBzdGF0
aWMgaW50IGdiY29kZWNfbWl4ZXJfZGFwbV9jdGxfaW5mbyhzdHJ1Y3Qgc25kX2tjb250cm9sICpr
Y29udHJvbCwKIAlpbnQgcGxhdGZvcm1fbWF4LCBwbGF0Zm9ybV9taW47CiAJc3RydWN0IGdiYXVk
aW9fY3RsX3B2dCAqZGF0YTsKIAlzdHJ1Y3QgZ2JfYXVkaW9fY3RsX2VsZW1faW5mbyAqaW5mbzsK
LQlzdHJ1Y3Qgc25kX3NvY19kYXBtX3dpZGdldF9saXN0ICp3bGlzdCA9IHNuZF9rY29udHJvbF9j
aGlwKGtjb250cm9sKTsKLQlzdHJ1Y3Qgc25kX3NvY19kYXBtX3dpZGdldCAqd2lkZ2V0ID0gd2xp
c3QtPndpZGdldHNbMF07Ci0Jc3RydWN0IHNuZF9zb2NfY29kZWMgKmNvZGVjID0gd2lkZ2V0LT5j
b2RlYzsKIAotCWRldl9kYmcoY29kZWMtPmRldiwgIkVudGVyZWQgJXM6JXNcbiIsIF9fZnVuY19f
LCBrY29udHJvbC0+aWQubmFtZSk7CiAJZGF0YSA9IChzdHJ1Y3QgZ2JhdWRpb19jdGxfcHZ0ICop
a2NvbnRyb2wtPnByaXZhdGVfdmFsdWU7CiAJaW5mbyA9IChzdHJ1Y3QgZ2JfYXVkaW9fY3RsX2Vs
ZW1faW5mbyAqKWRhdGEtPmluZm87CiAKQEAgLTM4NywxMSArMzgzLDExIEBAIHN0YXRpYyBpbnQg
Z2Jjb2RlY19taXhlcl9kYXBtX2N0bF9nZXQoc3RydWN0IHNuZF9rY29udHJvbCAqa2NvbnRyb2ws
CiAJc3RydWN0IGdiYXVkaW9fbW9kdWxlX2luZm8gKm1vZHVsZTsKIAlzdHJ1Y3Qgc25kX3NvY19k
YXBtX3dpZGdldF9saXN0ICp3bGlzdCA9IHNuZF9rY29udHJvbF9jaGlwKGtjb250cm9sKTsKIAlz
dHJ1Y3Qgc25kX3NvY19kYXBtX3dpZGdldCAqd2lkZ2V0ID0gd2xpc3QtPndpZGdldHNbMF07Ci0J
c3RydWN0IHNuZF9zb2NfY29kZWMgKmNvZGVjID0gd2lkZ2V0LT5jb2RlYzsKLQlzdHJ1Y3QgZ2Jh
dWRpb19jb2RlY19pbmZvICpnYiA9IHNuZF9zb2NfY29kZWNfZ2V0X2RydmRhdGEoY29kZWMpOwor
CXN0cnVjdCBkZXZpY2UgKmNvZGVjX2RldiA9IHdpZGdldC0+ZGFwbS0+ZGV2OworCXN0cnVjdCBn
YmF1ZGlvX2NvZGVjX2luZm8gKmdiID0gZGV2X2dldF9kcnZkYXRhKGNvZGVjX2Rldik7CiAJc3Ry
dWN0IGdiX2J1bmRsZSAqYnVuZGxlOwogCi0JZGV2X2RiZyhjb2RlYy0+ZGV2LCAiRW50ZXJlZCAl
czolc1xuIiwgX19mdW5jX18sIGtjb250cm9sLT5pZC5uYW1lKTsKKwlkZXZfZGJnKGNvZGVjX2Rl
diwgIkVudGVyZWQgJXM6JXNcbiIsIF9fZnVuY19fLCBrY29udHJvbC0+aWQubmFtZSk7CiAJbW9k
dWxlID0gZmluZF9nYl9tb2R1bGUoZ2IsIGtjb250cm9sLT5pZC5uYW1lKTsKIAlpZiAoIW1vZHVs
ZSkKIAkJcmV0dXJuIC1FSU5WQUw7CkBAIC00MTUsNyArNDExLDcgQEAgc3RhdGljIGludCBnYmNv
ZGVjX21peGVyX2RhcG1fY3RsX2dldChzdHJ1Y3Qgc25kX2tjb250cm9sICprY29udHJvbCwKIAln
Yl9wbV9ydW50aW1lX3B1dF9hdXRvc3VzcGVuZChidW5kbGUpOwogCiAJaWYgKHJldCkgewotCQlk
ZXZfZXJyX3JhdGVsaW1pdGVkKGNvZGVjLT5kZXYsICIlZDpFcnJvciBpbiAlcyBmb3IgJXNcbiIs
IHJldCwKKwkJZGV2X2Vycl9yYXRlbGltaXRlZChjb2RlY19kZXYsICIlZDpFcnJvciBpbiAlcyBm
b3IgJXNcbiIsIHJldCwKIAkJCQkgICAgX19mdW5jX18sIGtjb250cm9sLT5pZC5uYW1lKTsKIAkJ
cmV0dXJuIHJldDsKIAl9CkBAIC00MjksNyArNDI1LDcgQEAgc3RhdGljIGludCBnYmNvZGVjX21p
eGVyX2RhcG1fY3RsX2dldChzdHJ1Y3Qgc25kX2tjb250cm9sICprY29udHJvbCwKIHN0YXRpYyBp
bnQgZ2Jjb2RlY19taXhlcl9kYXBtX2N0bF9wdXQoc3RydWN0IHNuZF9rY29udHJvbCAqa2NvbnRy
b2wsCiAJCQkJICAgICAgc3RydWN0IHNuZF9jdGxfZWxlbV92YWx1ZSAqdWNvbnRyb2wpCiB7Ci0J
aW50IHJldCwgd2ksIG1heCwgY29ubmVjdDsKKwlpbnQgcmV0LCB3aSwgbWF4OwogCXVuc2lnbmVk
IGludCBtYXNrLCB2YWw7CiAJc3RydWN0IGdiX2F1ZGlvX2N0bF9lbGVtX2luZm8gKmluZm87CiAJ
c3RydWN0IGdiYXVkaW9fY3RsX3B2dCAqZGF0YTsKQEAgLTQzNywxMSArNDMzLDEyIEBAIHN0YXRp
YyBpbnQgZ2Jjb2RlY19taXhlcl9kYXBtX2N0bF9wdXQoc3RydWN0IHNuZF9rY29udHJvbCAqa2Nv
bnRyb2wsCiAJc3RydWN0IGdiYXVkaW9fbW9kdWxlX2luZm8gKm1vZHVsZTsKIAlzdHJ1Y3Qgc25k
X3NvY19kYXBtX3dpZGdldF9saXN0ICp3bGlzdCA9IHNuZF9rY29udHJvbF9jaGlwKGtjb250cm9s
KTsKIAlzdHJ1Y3Qgc25kX3NvY19kYXBtX3dpZGdldCAqd2lkZ2V0ID0gd2xpc3QtPndpZGdldHNb
MF07Ci0Jc3RydWN0IHNuZF9zb2NfY29kZWMgKmNvZGVjID0gd2lkZ2V0LT5jb2RlYzsKLQlzdHJ1
Y3QgZ2JhdWRpb19jb2RlY19pbmZvICpnYiA9IHNuZF9zb2NfY29kZWNfZ2V0X2RydmRhdGEoY29k
ZWMpOworCXN0cnVjdCBkZXZpY2UgKmNvZGVjX2RldiA9IHdpZGdldC0+ZGFwbS0+ZGV2OworCXN0
cnVjdCBnYmF1ZGlvX2NvZGVjX2luZm8gKmdiID0gZGV2X2dldF9kcnZkYXRhKGNvZGVjX2Rldik7
CisJc3RydWN0IHNuZF9zb2NfZGFwbV91cGRhdGUgKnVwZGF0ZSA9IE5VTEw7CiAJc3RydWN0IGdi
X2J1bmRsZSAqYnVuZGxlOwogCi0JZGV2X2RiZyhjb2RlYy0+ZGV2LCAiRW50ZXJlZCAlczolc1xu
IiwgX19mdW5jX18sIGtjb250cm9sLT5pZC5uYW1lKTsKKwlkZXZfZGJnKGNvZGVjX2RldiwgIkVu
dGVyZWQgJXM6JXNcbiIsIF9fZnVuY19fLCBrY29udHJvbC0+aWQubmFtZSk7CiAJbW9kdWxlID0g
ZmluZF9nYl9tb2R1bGUoZ2IsIGtjb250cm9sLT5pZC5uYW1lKTsKIAlpZiAoIW1vZHVsZSkKIAkJ
cmV0dXJuIC1FSU5WQUw7CkBAIC00NTgsMTcgKzQ1NSwxMyBAQCBzdGF0aWMgaW50IGdiY29kZWNf
bWl4ZXJfZGFwbV9jdGxfcHV0KHN0cnVjdCBzbmRfa2NvbnRyb2wgKmtjb250cm9sLAogCW1heCA9
IGxlMzJfdG9fY3B1KGluZm8tPnZhbHVlLmludGVnZXIubWF4KTsKIAltYXNrID0gKDEgPDwgZmxz
KG1heCkpIC0gMTsKIAl2YWwgPSB1Y29udHJvbC0+dmFsdWUuaW50ZWdlci52YWx1ZVswXSAmIG1h
c2s7Ci0JY29ubmVjdCA9ICEhdmFsOwogCiAJLyogdXBkYXRlIHVjb250cm9sICovCiAJaWYgKGdi
dmFsdWUudmFsdWUuaW50ZWdlcl92YWx1ZVswXSAhPSB2YWwpIHsKIAkJZm9yICh3aSA9IDA7IHdp
IDwgd2xpc3QtPm51bV93aWRnZXRzOyB3aSsrKSB7CiAJCQl3aWRnZXQgPSB3bGlzdC0+d2lkZ2V0
c1t3aV07Ci0KLQkJCXdpZGdldC0+dmFsdWUgPSB2YWw7Ci0JCQl3aWRnZXQtPmRhcG0tPnVwZGF0
ZSA9IE5VTEw7Ci0JCQlzbmRfc29jX2RhcG1fbWl4ZXJfdXBkYXRlX3Bvd2VyKHdpZGdldCwga2Nv
bnRyb2wsCi0JCQkJCQkJY29ubmVjdCk7CisJCQlzbmRfc29jX2RhcG1fbWl4ZXJfdXBkYXRlX3Bv
d2VyKHdpZGdldC0+ZGFwbSwga2NvbnRyb2wsCisJCQkJCQkJdmFsLCB1cGRhdGUpOwogCQl9CiAJ
CWdidmFsdWUudmFsdWUuaW50ZWdlcl92YWx1ZVswXSA9CiAJCQljcHVfdG9fbGUzMih1Y29udHJv
bC0+dmFsdWUuaW50ZWdlci52YWx1ZVswXSk7CkBAIC00ODQsNyArNDc3LDcgQEAgc3RhdGljIGlu
dCBnYmNvZGVjX21peGVyX2RhcG1fY3RsX3B1dChzdHJ1Y3Qgc25kX2tjb250cm9sICprY29udHJv
bCwKIAkJZ2JfcG1fcnVudGltZV9wdXRfYXV0b3N1c3BlbmQoYnVuZGxlKTsKIAogCQlpZiAocmV0
KSB7Ci0JCQlkZXZfZXJyX3JhdGVsaW1pdGVkKGNvZGVjLT5kZXYsCisJCQlkZXZfZXJyX3JhdGVs
aW1pdGVkKGNvZGVjX2RldiwKIAkJCQkJICAgICIlZDpFcnJvciBpbiAlcyBmb3IgJXNcbiIsIHJl
dCwKIAkJCQkJICAgIF9fZnVuY19fLCBrY29udHJvbC0+aWQubmFtZSk7CiAJCQlyZXR1cm4gcmV0
OwpAQCAtNTUzLDExICs1NDYsMTEgQEAgc3RhdGljIGludCBnYmNvZGVjX2VudW1fY3RsX2dldChz
dHJ1Y3Qgc25kX2tjb250cm9sICprY29udHJvbCwKIAkJCQlzdHJ1Y3Qgc25kX2N0bF9lbGVtX3Zh
bHVlICp1Y29udHJvbCkKIHsKIAlpbnQgcmV0LCBjdGxfaWQ7Ci0Jc3RydWN0IHNuZF9zb2NfY29k
ZWMgKmNvZGVjID0gc25kX2tjb250cm9sX2NoaXAoa2NvbnRyb2wpOworCXN0cnVjdCBzbmRfc29j
X2NvbXBvbmVudCAqY29tcCA9IHNuZF9zb2Nfa2NvbnRyb2xfY29tcG9uZW50KGtjb250cm9sKTsK
KwlzdHJ1Y3QgZ2JhdWRpb19jb2RlY19pbmZvICpnYiA9IHNuZF9zb2NfY29tcG9uZW50X2dldF9k
cnZkYXRhKGNvbXApOwogCXN0cnVjdCBzb2NfZW51bSAqZSA9IChzdHJ1Y3Qgc29jX2VudW0gKilr
Y29udHJvbC0+cHJpdmF0ZV92YWx1ZTsKIAlzdHJ1Y3QgZ2JfYXVkaW9fY3RsX2VsZW1fdmFsdWUg
Z2J2YWx1ZTsKIAlzdHJ1Y3QgZ2JhdWRpb19tb2R1bGVfaW5mbyAqbW9kdWxlOwotCXN0cnVjdCBn
YmF1ZGlvX2NvZGVjX2luZm8gKmdiID0gc25kX3NvY19jb2RlY19nZXRfZHJ2ZGF0YShjb2RlYyk7
CiAJc3RydWN0IGdiX2J1bmRsZSAqYnVuZGxlOwogCiAJbW9kdWxlID0gZmluZF9nYl9tb2R1bGUo
Z2IsIGtjb250cm9sLT5pZC5uYW1lKTsKQEAgLTU4MCw3ICs1NzMsNyBAQCBzdGF0aWMgaW50IGdi
Y29kZWNfZW51bV9jdGxfZ2V0KHN0cnVjdCBzbmRfa2NvbnRyb2wgKmtjb250cm9sLAogCWdiX3Bt
X3J1bnRpbWVfcHV0X2F1dG9zdXNwZW5kKGJ1bmRsZSk7CiAKIAlpZiAocmV0KSB7Ci0JCWRldl9l
cnJfcmF0ZWxpbWl0ZWQoY29kZWMtPmRldiwgIiVkOkVycm9yIGluICVzIGZvciAlc1xuIiwgcmV0
LAorCQlkZXZfZXJyX3JhdGVsaW1pdGVkKGNvbXAtPmRldiwgIiVkOkVycm9yIGluICVzIGZvciAl
c1xuIiwgcmV0LAogCQkJCSAgICBfX2Z1bmNfXywga2NvbnRyb2wtPmlkLm5hbWUpOwogCQlyZXR1
cm4gcmV0OwogCX0KQEAgLTU5OCwxMSArNTkxLDExIEBAIHN0YXRpYyBpbnQgZ2Jjb2RlY19lbnVt
X2N0bF9wdXQoc3RydWN0IHNuZF9rY29udHJvbCAqa2NvbnRyb2wsCiAJCQkJc3RydWN0IHNuZF9j
dGxfZWxlbV92YWx1ZSAqdWNvbnRyb2wpCiB7CiAJaW50IHJldCwgY3RsX2lkOwotCXN0cnVjdCBz
bmRfc29jX2NvZGVjICpjb2RlYyA9IHNuZF9rY29udHJvbF9jaGlwKGtjb250cm9sKTsKKwlzdHJ1
Y3Qgc25kX3NvY19jb21wb25lbnQgKmNvbXAgPSBzbmRfc29jX2tjb250cm9sX2NvbXBvbmVudChr
Y29udHJvbCk7CisJc3RydWN0IGdiYXVkaW9fY29kZWNfaW5mbyAqZ2IgPSBzbmRfc29jX2NvbXBv
bmVudF9nZXRfZHJ2ZGF0YShjb21wKTsKIAlzdHJ1Y3Qgc29jX2VudW0gKmUgPSAoc3RydWN0IHNv
Y19lbnVtICopa2NvbnRyb2wtPnByaXZhdGVfdmFsdWU7CiAJc3RydWN0IGdiX2F1ZGlvX2N0bF9l
bGVtX3ZhbHVlIGdidmFsdWU7CiAJc3RydWN0IGdiYXVkaW9fbW9kdWxlX2luZm8gKm1vZHVsZTsK
LQlzdHJ1Y3QgZ2JhdWRpb19jb2RlY19pbmZvICpnYiA9IHNuZF9zb2NfY29kZWNfZ2V0X2RydmRh
dGEoY29kZWMpOwogCXN0cnVjdCBnYl9idW5kbGUgKmJ1bmRsZTsKIAogCW1vZHVsZSA9IGZpbmRf
Z2JfbW9kdWxlKGdiLCBrY29udHJvbC0+aWQubmFtZSk7CkBAIC02MTMsMTMgKzYwNiwxMyBAQCBz
dGF0aWMgaW50IGdiY29kZWNfZW51bV9jdGxfcHV0KHN0cnVjdCBzbmRfa2NvbnRyb2wgKmtjb250
cm9sLAogCWlmIChjdGxfaWQgPCAwKQogCQlyZXR1cm4gLUVJTlZBTDsKIAotCWlmICh1Y29udHJv
bC0+dmFsdWUuZW51bWVyYXRlZC5pdGVtWzBdID4gZS0+bWF4IC0gMSkKKwlpZiAodWNvbnRyb2wt
PnZhbHVlLmVudW1lcmF0ZWQuaXRlbVswXSA+IGUtPml0ZW1zIC0gMSkKIAkJcmV0dXJuIC1FSU5W
QUw7CiAJZ2J2YWx1ZS52YWx1ZS5lbnVtZXJhdGVkX2l0ZW1bMF0gPQogCQljcHVfdG9fbGUzMih1
Y29udHJvbC0+dmFsdWUuZW51bWVyYXRlZC5pdGVtWzBdKTsKIAogCWlmIChlLT5zaGlmdF9sICE9
IGUtPnNoaWZ0X3IpIHsKLQkJaWYgKHVjb250cm9sLT52YWx1ZS5lbnVtZXJhdGVkLml0ZW1bMV0g
PiBlLT5tYXggLSAxKQorCQlpZiAodWNvbnRyb2wtPnZhbHVlLmVudW1lcmF0ZWQuaXRlbVsxXSA+
IGUtPml0ZW1zIC0gMSkKIAkJCXJldHVybiAtRUlOVkFMOwogCQlnYnZhbHVlLnZhbHVlLmVudW1l
cmF0ZWRfaXRlbVsxXSA9CiAJCQljcHVfdG9fbGUzMih1Y29udHJvbC0+dmFsdWUuZW51bWVyYXRl
ZC5pdGVtWzFdKTsKQEAgLTYzNyw4ICs2MzAsOCBAQCBzdGF0aWMgaW50IGdiY29kZWNfZW51bV9j
dGxfcHV0KHN0cnVjdCBzbmRfa2NvbnRyb2wgKmtjb250cm9sLAogCWdiX3BtX3J1bnRpbWVfcHV0
X2F1dG9zdXNwZW5kKGJ1bmRsZSk7CiAKIAlpZiAocmV0KSB7Ci0JCWRldl9lcnJfcmF0ZWxpbWl0
ZWQoY29kZWMtPmRldiwgIiVkOkVycm9yIGluICVzIGZvciAlc1xuIiwgcmV0LAotCQkJCSAgICBf
X2Z1bmNfXywga2NvbnRyb2wtPmlkLm5hbWUpOworCQlkZXZfZXJyX3JhdGVsaW1pdGVkKGNvbXAt
PmRldiwgIiVkOkVycm9yIGluICVzIGZvciAlc1xuIiwKKwkJCQkgICAgcmV0LCBfX2Z1bmNfXywg
a2NvbnRyb2wtPmlkLm5hbWUpOwogCX0KIAogCXJldHVybiByZXQ7CkBAIC02NTksMTMgKzY1Miwx
MyBAQCBzdGF0aWMgaW50IGdiYXVkaW9fdHBsZ19jcmVhdGVfZW51bV9rY3RsKHN0cnVjdCBnYmF1
ZGlvX21vZHVsZV9pbmZvICpnYiwKIAlnYl9lbnVtID0gJmN0bC0+aW5mby52YWx1ZS5lbnVtZXJh
dGVkOwogCiAJLyogc2luY2UgY291bnQ9MSwgYW5kIHJlZyBpcyBkdW1teSAqLwotCWdiZS0+bWF4
ID0gbGUzMl90b19jcHUoZ2JfZW51bS0+aXRlbXMpOworCWdiZS0+aXRlbXMgPSBsZTMyX3RvX2Nw
dShnYl9lbnVtLT5pdGVtcyk7CiAJZ2JlLT50ZXh0cyA9IGdiX2dlbmVyYXRlX2VudW1fc3RyaW5n
cyhnYiwgZ2JfZW51bSk7CiAKIAkvKiBkZWJ1ZyBlbnVtIGluZm8gKi8KLQlkZXZfZGJnKGdiLT5k
ZXYsICJNYXg6JWQsIG5hbWVfbGVuZ3RoOiVkXG4iLCBnYmUtPm1heCwKKwlkZXZfZGJnKGdiLT5k
ZXYsICJNYXg6JWQsIG5hbWVfbGVuZ3RoOiVkXG4iLCBnYmUtPml0ZW1zLAogCQlsZTE2X3RvX2Nw
dShnYl9lbnVtLT5uYW1lc19sZW5ndGgpKTsKLQlmb3IgKGkgPSAwOyBpIDwgZ2JlLT5tYXg7IGkr
KykKKwlmb3IgKGkgPSAwOyBpIDwgZ2JlLT5pdGVtczsgaSsrKQogCQlkZXZfZGJnKGdiLT5kZXYs
ICJzcmNbJWRdOiAlc1xuIiwgaSwgZ2JlLT50ZXh0c1tpXSk7CiAKIAkqa2N0bCA9IChzdHJ1Y3Qg
c25kX2tjb250cm9sX25ldykKQEAgLTcyMCw4ICs3MTMsOCBAQCBzdGF0aWMgaW50IGdiY29kZWNf
ZW51bV9kYXBtX2N0bF9nZXQoc3RydWN0IHNuZF9rY29udHJvbCAqa2NvbnRyb2wsCiAJc3RydWN0
IHNuZF9zb2NfZGFwbV93aWRnZXQgKndpZGdldCA9IHdsaXN0LT53aWRnZXRzWzBdOwogCXN0cnVj
dCBnYmF1ZGlvX21vZHVsZV9pbmZvICptb2R1bGU7CiAJc3RydWN0IGdiX2F1ZGlvX2N0bF9lbGVt
X3ZhbHVlIGdidmFsdWU7Ci0Jc3RydWN0IHNuZF9zb2NfY29kZWMgKmNvZGVjID0gd2lkZ2V0LT5j
b2RlYzsKLQlzdHJ1Y3QgZ2JhdWRpb19jb2RlY19pbmZvICpnYiA9IHNuZF9zb2NfY29kZWNfZ2V0
X2RydmRhdGEoY29kZWMpOworCXN0cnVjdCBkZXZpY2UgKmNvZGVjX2RldiA9IHdpZGdldC0+ZGFw
bS0+ZGV2OworCXN0cnVjdCBnYmF1ZGlvX2NvZGVjX2luZm8gKmdiID0gZGV2X2dldF9kcnZkYXRh
KGNvZGVjX2Rldik7CiAJc3RydWN0IHNvY19lbnVtICplID0gKHN0cnVjdCBzb2NfZW51bSAqKWtj
b250cm9sLT5wcml2YXRlX3ZhbHVlOwogCXN0cnVjdCBnYl9idW5kbGUgKmJ1bmRsZTsKIApAQCAt
NzQ1LDcgKzczOCw3IEBAIHN0YXRpYyBpbnQgZ2Jjb2RlY19lbnVtX2RhcG1fY3RsX2dldChzdHJ1
Y3Qgc25kX2tjb250cm9sICprY29udHJvbCwKIAlnYl9wbV9ydW50aW1lX3B1dF9hdXRvc3VzcGVu
ZChidW5kbGUpOwogCiAJaWYgKHJldCkgewotCQlkZXZfZXJyX3JhdGVsaW1pdGVkKGNvZGVjLT5k
ZXYsICIlZDpFcnJvciBpbiAlcyBmb3IgJXNcbiIsIHJldCwKKwkJZGV2X2Vycl9yYXRlbGltaXRl
ZChjb2RlY19kZXYsICIlZDpFcnJvciBpbiAlcyBmb3IgJXNcbiIsIHJldCwKIAkJCQkgICAgX19m
dW5jX18sIGtjb250cm9sLT5pZC5uYW1lKTsKIAkJcmV0dXJuIHJldDsKIAl9CkBAIC03NjgsMTIg
Kzc2MSwxMyBAQCBzdGF0aWMgaW50IGdiY29kZWNfZW51bV9kYXBtX2N0bF9wdXQoc3RydWN0IHNu
ZF9rY29udHJvbCAqa2NvbnRyb2wsCiAJc3RydWN0IHNuZF9zb2NfZGFwbV93aWRnZXQgKndpZGdl
dCA9IHdsaXN0LT53aWRnZXRzWzBdOwogCXN0cnVjdCBnYl9hdWRpb19jdGxfZWxlbV92YWx1ZSBn
YnZhbHVlOwogCXN0cnVjdCBnYmF1ZGlvX21vZHVsZV9pbmZvICptb2R1bGU7Ci0Jc3RydWN0IHNu
ZF9zb2NfY29kZWMgKmNvZGVjID0gd2lkZ2V0LT5jb2RlYzsKLQlzdHJ1Y3QgZ2JhdWRpb19jb2Rl
Y19pbmZvICpnYiA9IHNuZF9zb2NfY29kZWNfZ2V0X2RydmRhdGEoY29kZWMpOworCXN0cnVjdCBk
ZXZpY2UgKmNvZGVjX2RldiA9IHdpZGdldC0+ZGFwbS0+ZGV2OworCXN0cnVjdCBnYmF1ZGlvX2Nv
ZGVjX2luZm8gKmdiID0gZGV2X2dldF9kcnZkYXRhKGNvZGVjX2Rldik7CiAJc3RydWN0IHNvY19l
bnVtICplID0gKHN0cnVjdCBzb2NfZW51bSAqKWtjb250cm9sLT5wcml2YXRlX3ZhbHVlOwogCXN0
cnVjdCBnYl9idW5kbGUgKmJ1bmRsZTsKKwlzdHJ1Y3Qgc25kX3NvY19kYXBtX3VwZGF0ZSAqdXBk
YXRlID0gTlVMTDsKIAotCWlmICh1Y29udHJvbC0+dmFsdWUuZW51bWVyYXRlZC5pdGVtWzBdID4g
ZS0+bWF4IC0gMSkKKwlpZiAodWNvbnRyb2wtPnZhbHVlLmVudW1lcmF0ZWQuaXRlbVswXSA+IGUt
Pml0ZW1zIC0gMSkKIAkJcmV0dXJuIC1FSU5WQUw7CiAKIAltb2R1bGUgPSBmaW5kX2diX21vZHVs
ZShnYiwga2NvbnRyb2wtPmlkLm5hbWUpOwpAQCAtNzk3LDcgKzc5MSw3IEBAIHN0YXRpYyBpbnQg
Z2Jjb2RlY19lbnVtX2RhcG1fY3RsX3B1dChzdHJ1Y3Qgc25kX2tjb250cm9sICprY29udHJvbCwK
IAlnYl9wbV9ydW50aW1lX3B1dF9hdXRvc3VzcGVuZChidW5kbGUpOwogCiAJaWYgKHJldCkgewot
CQlkZXZfZXJyX3JhdGVsaW1pdGVkKGNvZGVjLT5kZXYsICIlZDpFcnJvciBpbiAlcyBmb3IgJXNc
biIsIHJldCwKKwkJZGV2X2Vycl9yYXRlbGltaXRlZChjb2RlY19kZXYsICIlZDpFcnJvciBpbiAl
cyBmb3IgJXNcbiIsIHJldCwKIAkJCQkgICAgX19mdW5jX18sIGtjb250cm9sLT5pZC5uYW1lKTsK
IAkJcmV0dXJuIHJldDsKIAl9CkBAIC04MTQsNyArODA4LDcgQEAgc3RhdGljIGludCBnYmNvZGVj
X2VudW1fZGFwbV9jdGxfcHV0KHN0cnVjdCBzbmRfa2NvbnRyb2wgKmtjb250cm9sLAogCX0KIAog
CWlmIChlLT5zaGlmdF9sICE9IGUtPnNoaWZ0X3IpIHsKLQkJaWYgKHVjb250cm9sLT52YWx1ZS5l
bnVtZXJhdGVkLml0ZW1bMV0gPiBlLT5tYXggLSAxKQorCQlpZiAodWNvbnRyb2wtPnZhbHVlLmVu
dW1lcmF0ZWQuaXRlbVsxXSA+IGUtPml0ZW1zIC0gMSkKIAkJCXJldHVybiAtRUlOVkFMOwogCQl2
YWwgfD0gdWNvbnRyb2wtPnZhbHVlLmVudW1lcmF0ZWQuaXRlbVsxXSA8PCBlLT5zaGlmdF9yOwog
CQltYXNrIHw9IGUtPm1hc2sgPDwgZS0+c2hpZnRfcjsKQEAgLTgzNywxNiArODMxLDE0IEBAIHN0
YXRpYyBpbnQgZ2Jjb2RlY19lbnVtX2RhcG1fY3RsX3B1dChzdHJ1Y3Qgc25kX2tjb250cm9sICpr
Y29udHJvbCwKIAkJZ2JfcG1fcnVudGltZV9wdXRfYXV0b3N1c3BlbmQoYnVuZGxlKTsKIAogCQlp
ZiAocmV0KSB7Ci0JCQlkZXZfZXJyX3JhdGVsaW1pdGVkKGNvZGVjLT5kZXYsCisJCQlkZXZfZXJy
X3JhdGVsaW1pdGVkKGNvZGVjX2RldiwKIAkJCQkJICAgICIlZDpFcnJvciBpbiAlcyBmb3IgJXNc
biIsIHJldCwKIAkJCQkJICAgIF9fZnVuY19fLCBrY29udHJvbC0+aWQubmFtZSk7CiAJCX0KIAkJ
Zm9yICh3aSA9IDA7IHdpIDwgd2xpc3QtPm51bV93aWRnZXRzOyB3aSsrKSB7CiAJCQl3aWRnZXQg
PSB3bGlzdC0+d2lkZ2V0c1t3aV07Ci0KLQkJCXdpZGdldC0+dmFsdWUgPSB2YWw7Ci0JCQl3aWRn
ZXQtPmRhcG0tPnVwZGF0ZSA9IE5VTEw7Ci0JCQlzbmRfc29jX2RhcG1fbXV4X3VwZGF0ZV9wb3dl
cih3aWRnZXQsIGtjb250cm9sLCBtdXgsIGUpOworCQkJc25kX3NvY19kYXBtX211eF91cGRhdGVf
cG93ZXIod2lkZ2V0LT5kYXBtLCBrY29udHJvbCwKKwkJCQkJCSAgICAgIHZhbCwgZSwgdXBkYXRl
KTsKIAkJfQogCX0KIApAQCAtODY4LDEzICs4NjAsMTMgQEAgc3RhdGljIGludCBnYmF1ZGlvX3Rw
bGdfY3JlYXRlX2VudW1fY3RsKHN0cnVjdCBnYmF1ZGlvX21vZHVsZV9pbmZvICpnYiwKIAlnYl9l
bnVtID0gJmN0bC0+aW5mby52YWx1ZS5lbnVtZXJhdGVkOwogCiAJLyogc2luY2UgY291bnQ9MSwg
YW5kIHJlZyBpcyBkdW1teSAqLwotCWdiZS0+bWF4ID0gbGUzMl90b19jcHUoZ2JfZW51bS0+aXRl
bXMpOworCWdiZS0+aXRlbXMgPSBsZTMyX3RvX2NwdShnYl9lbnVtLT5pdGVtcyk7CiAJZ2JlLT50
ZXh0cyA9IGdiX2dlbmVyYXRlX2VudW1fc3RyaW5ncyhnYiwgZ2JfZW51bSk7CiAKIAkvKiBkZWJ1
ZyBlbnVtIGluZm8gKi8KLQlkZXZfZGJnKGdiLT5kZXYsICJNYXg6JWQsIG5hbWVfbGVuZ3RoOiVk
XG4iLCBnYmUtPm1heCwKKwlkZXZfZGJnKGdiLT5kZXYsICJNYXg6JWQsIG5hbWVfbGVuZ3RoOiVk
XG4iLCBnYmUtPml0ZW1zLAogCQlsZTE2X3RvX2NwdShnYl9lbnVtLT5uYW1lc19sZW5ndGgpKTsK
LQlmb3IgKGkgPSAwOyBpIDwgZ2JlLT5tYXg7IGkrKykKKwlmb3IgKGkgPSAwOyBpIDwgZ2JlLT5p
dGVtczsgaSsrKQogCQlkZXZfZGJnKGdiLT5kZXYsICJzcmNbJWRdOiAlc1xuIiwgaSwgZ2JlLT50
ZXh0c1tpXSk7CiAKIAkqa2N0bCA9IChzdHJ1Y3Qgc25kX2tjb250cm9sX25ldykKQEAgLTkzNSwx
MiArOTI3LDEyIEBAIHN0YXRpYyBpbnQgZ2JhdWRpb193aWRnZXRfZXZlbnQoc3RydWN0IHNuZF9z
b2NfZGFwbV93aWRnZXQgKncsCiB7CiAJaW50IHdpZDsKIAlpbnQgcmV0OwotCXN0cnVjdCBzbmRf
c29jX2NvZGVjICpjb2RlYyA9IHctPmNvZGVjOwotCXN0cnVjdCBnYmF1ZGlvX2NvZGVjX2luZm8g
KmdiY29kZWMgPSBzbmRfc29jX2NvZGVjX2dldF9kcnZkYXRhKGNvZGVjKTsKKwlzdHJ1Y3QgZGV2
aWNlICpjb2RlY19kZXYgPSB3LT5kYXBtLT5kZXY7CisJc3RydWN0IGdiYXVkaW9fY29kZWNfaW5m
byAqZ2Jjb2RlYyA9IGRldl9nZXRfZHJ2ZGF0YShjb2RlY19kZXYpOwogCXN0cnVjdCBnYmF1ZGlv
X21vZHVsZV9pbmZvICptb2R1bGU7CiAJc3RydWN0IGdiX2J1bmRsZSAqYnVuZGxlOwogCi0JZGV2
X2RiZyhjb2RlYy0+ZGV2LCAiJXMgJXMgJWRcbiIsIF9fZnVuY19fLCB3LT5uYW1lLCBldmVudCk7
CisJZGV2X2RiZyhjb2RlY19kZXYsICIlcyAlcyAlZFxuIiwgX19mdW5jX18sIHctPm5hbWUsIGV2
ZW50KTsKIAogCS8qIEZpbmQgcmVsZXZhbnQgbW9kdWxlICovCiAJbW9kdWxlID0gZmluZF9nYl9t
b2R1bGUoZ2Jjb2RlYywgdy0+bmFtZSk7CkBAIC05NTAsNyArOTQyLDcgQEAgc3RhdGljIGludCBn
YmF1ZGlvX3dpZGdldF9ldmVudChzdHJ1Y3Qgc25kX3NvY19kYXBtX3dpZGdldCAqdywKIAkvKiBt
YXAgbmFtZSB0byB3aWRnZXQgaWQgKi8KIAl3aWQgPSBnYmF1ZGlvX21hcF93aWRnZXRuYW1lKG1v
ZHVsZSwgdy0+bmFtZSk7CiAJaWYgKHdpZCA8IDApIHsKLQkJZGV2X2Vycihjb2RlYy0+ZGV2LCAi
SW52YWxpZCB3aWRnZXQgbmFtZTolc1xuIiwgdy0+bmFtZSk7CisJCWRldl9lcnIoY29kZWNfZGV2
LCAiSW52YWxpZCB3aWRnZXQgbmFtZTolc1xuIiwgdy0+bmFtZSk7CiAJCXJldHVybiAtRUlOVkFM
OwogCX0KIApAQCAtOTczLDcgKzk2NSw3IEBAIHN0YXRpYyBpbnQgZ2JhdWRpb193aWRnZXRfZXZl
bnQoc3RydWN0IHNuZF9zb2NfZGFwbV93aWRnZXQgKncsCiAJCWJyZWFrOwogCX0KIAlpZiAocmV0
KQotCQlkZXZfZXJyX3JhdGVsaW1pdGVkKGNvZGVjLT5kZXYsCisJCWRldl9lcnJfcmF0ZWxpbWl0
ZWQoY29kZWNfZGV2LAogCQkJCSAgICAiJWQ6IHdpZGdldCwgZXZlbnQ6JWQgZmFpbGVkOiVkXG4i
LCB3aWQsCiAJCQkJICAgIGV2ZW50LCByZXQpOwogCi0tIAoyLjI2LjIKCl9fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmdyZXlidXMtZGV2IG1haWxpbmcgbGlz
dApncmV5YnVzLWRldkBsaXN0cy5saW5hcm8ub3JnCmh0dHBzOi8vbGlzdHMubGluYXJvLm9yZy9t
YWlsbWFuL2xpc3RpbmZvL2dyZXlidXMtZGV2Cg==
